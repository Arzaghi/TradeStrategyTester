import unittest
import pandas as pd
import numpy as np
from unittest.mock import patch, MagicMock
from charts.chart_interface import IChart, Timeframe, Candle, TrendMetrics
from charts.binance_chart import BinanceAPI, BinanceChart
from datetime import datetime, timedelta, timezone

class MockChart(IChart):
    def __init__(self, symbol: str, timeframe: Timeframe, raw_data: list):
        super().__init__(symbol, timeframe)
        self._raw_data = raw_data

    def get_current_candle_time(self):
        return datetime(1970, 1, 1, tzinfo=timezone.utc)
    
    def get_current_price(self) -> float:
        return 123.45

    def get_recent_raw_ohlcv(self, n: int) -> list:
        return self._raw_data[:n]

    def have_new_data(self, now = None):
        return True

class TestIChart(unittest.TestCase):
    def setUp(self):
        self.raw_candle = [
            1630000000000, 100.0, 105.0, 95.0, 102.0, 1500.0,
            1630000005000, 153000.0, 120, 700.0, 71500.0, None
        ]
        self.raw_data = [self.raw_candle for _ in range(20)]
        self.chart = MockChart("BTCUSDT", Timeframe.MINUTE_1, self.raw_data)

    def test_get_recent_candles(self):
        candles = self.chart.get_recent_candles(5)
        self.assertEqual(len(candles), 5)
        self.assertIsInstance(candles[0], Candle)
        self.assertEqual(candles[0].open, 100.0)
        self.assertEqual(candles[0].timestamp, 1630000000000)

    def test_get_recent_dataframes(self):
        df = self.chart.get_recent_dataframes(5)
        self.assertIsInstance(df, pd.DataFrame)
        self.assertEqual(len(df), 6)  # period + 1
        self.assertIn("Open", df.columns)
        self.assertEqual(df["Open"].dtype, float)

    def test_dataframe_index_is_datetime(self):
        df = self.chart.get_recent_dataframes(5)
        self.assertTrue(pd.api.types.is_datetime64_any_dtype(df.index))

class TestBinanceAPI(unittest.TestCase):
    @patch("charts.binance_chart.requests.get")
    def test_get_candles(self, mock_get):
        mock_get.return_value.json.return_value = [["dummy"]]
        mock_get.return_value.raise_for_status = lambda: None
        api = BinanceAPI()
        candles = api.get_candles("BTCUSDT", "1h")
        self.assertEqual(candles, [["dummy"]])

    @patch("charts.binance_chart.requests.get")
    def test_get_current_price(self, mock_get):
        mock_get.return_value.json.return_value = {"price": "123.45"}
        mock_get.return_value.raise_for_status = lambda: None
        api = BinanceAPI()
        price = api.get_current_price("BTCUSDT")
        self.assertEqual(price, 123.45)

class TestBinanceChartCaching(unittest.TestCase):
    def setUp(self):
        BinanceChart._shared_ohlcv_cache.clear()
        self.symbol = "BTCUSDT"
        self.timeframe = Timeframe.MINUTE_1
        self.chart = BinanceChart(self.symbol, self.timeframe)

    def test_is_new_candle_due(self):
        scenarios = [
            {"timeframe": Timeframe.MINUTE_5,   "last": datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc),    "checks": [(datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc), False),    (datetime(2025, 11, 2, 22, 4, 59, tzinfo=timezone.utc), False),  (datetime(2025, 11, 2, 22, 5, 0, tzinfo=timezone.utc), True)]    },
            {"timeframe": Timeframe.MINUTE_5,   "last": datetime(2025, 11, 2, 22, 2, 0, tzinfo=timezone.utc),    "checks": [(datetime(2025, 11, 2, 22, 2, 0, tzinfo=timezone.utc), False),    (datetime(2025, 11, 2, 22, 4, 59, tzinfo=timezone.utc), False),  (datetime(2025, 11, 2, 22, 5, 0, tzinfo=timezone.utc), True)]    },
            {"timeframe": Timeframe.MINUTE_15,  "last": datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc),    "checks": [(datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc), False),    (datetime(2025, 11, 2, 22, 14, 59, tzinfo=timezone.utc), False), (datetime(2025, 11, 2, 22, 15, 0, tzinfo=timezone.utc), True)]   },
            {"timeframe": Timeframe.MINUTE_15,  "last": datetime(2025, 11, 2, 22, 5, 0, tzinfo=timezone.utc),    "checks": [(datetime(2025, 11, 2, 22, 5, 0, tzinfo=timezone.utc), False),    (datetime(2025, 11, 2, 22, 14, 59, tzinfo=timezone.utc), False), (datetime(2025, 11, 2, 22, 15, 0, tzinfo=timezone.utc), True)]   },
            {"timeframe": Timeframe.MINUTE_30,  "last": datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc),    "checks": [(datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc), False),    (datetime(2025, 11, 2, 22, 29, 59, tzinfo=timezone.utc), False), (datetime(2025, 11, 2, 22, 30, 0, tzinfo=timezone.utc), True)]   },
            {"timeframe": Timeframe.MINUTE_30,  "last": datetime(2025, 11, 2, 22, 10, 0, tzinfo=timezone.utc),   "checks": [(datetime(2025, 11, 2, 22, 10, 0, tzinfo=timezone.utc), False),   (datetime(2025, 11, 2, 22, 29, 59, tzinfo=timezone.utc), False), (datetime(2025, 11, 2, 22, 30, 0, tzinfo=timezone.utc), True)]   },
            {"timeframe": Timeframe.HOURS_1,    "last": datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc),    "checks": [(datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc), False),    (datetime(2025, 11, 2, 22, 59, 59, tzinfo=timezone.utc), False), (datetime(2025, 11, 2, 23, 0, 0, tzinfo=timezone.utc), True)]    },
            {"timeframe": Timeframe.HOURS_1,    "last": datetime(2025, 11, 2, 22, 5, 0, tzinfo=timezone.utc),    "checks": [(datetime(2025, 11, 2, 22, 5, 0, tzinfo=timezone.utc), False),    (datetime(2025, 11, 2, 22, 59, 59, tzinfo=timezone.utc), False), (datetime(2025, 11, 2, 23, 0, 0, tzinfo=timezone.utc), True)]    },
            {"timeframe": Timeframe.HOURS_2,    "last": datetime(2025, 11, 2, 20, 0, 0, tzinfo=timezone.utc),    "checks": [(datetime(2025, 11, 2, 20, 0, 0, tzinfo=timezone.utc), False),    (datetime(2025, 11, 2, 21, 59, 59, tzinfo=timezone.utc), False), (datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc), True)]    },
            {"timeframe": Timeframe.HOURS_2,    "last": datetime(2025, 11, 2, 19, 30, 0, tzinfo=timezone.utc),   "checks": [(datetime(2025, 11, 2, 19, 30, 0, tzinfo=timezone.utc), False),   (datetime(2025, 11, 2, 19, 59, 59, tzinfo=timezone.utc), False), (datetime(2025, 11, 2, 20, 0, 0, tzinfo=timezone.utc), True)]    },
            {"timeframe": Timeframe.HOURS_4,    "last": datetime(2025, 11, 2, 20, 0, 0, tzinfo=timezone.utc),    "checks": [(datetime(2025, 11, 2, 20, 0, 0, tzinfo=timezone.utc), False),    (datetime(2025, 11, 2, 23, 59, 59, tzinfo=timezone.utc), False), (datetime(2025, 11, 3, 0, 0, 0, tzinfo=timezone.utc), True)]     },
            {"timeframe": Timeframe.HOURS_4,    "last": datetime(2025, 11, 2, 16, 50, 50, tzinfo=timezone.utc),  "checks": [(datetime(2025, 11, 2, 16, 50, 50, tzinfo=timezone.utc), False),  (datetime(2025, 11, 2, 19, 59, 59, tzinfo=timezone.utc), False), (datetime(2025, 11, 2, 20, 0, 0, tzinfo=timezone.utc), True)]    },
            {"timeframe": Timeframe.DAY_1,      "last": datetime(2025, 11, 2, 0, 0, 0, tzinfo=timezone.utc),     "checks": [(datetime(2025, 11, 2, 0, 0, 0, tzinfo=timezone.utc), False),     (datetime(2025, 11, 2, 23, 59, 59, tzinfo=timezone.utc), False), (datetime(2025, 11, 3, 0, 0, 0, tzinfo=timezone.utc), True)]     },
            {"timeframe": Timeframe.DAY_1,      "last": datetime(2025, 11, 2, 2, 15, 50, tzinfo=timezone.utc),   "checks": [(datetime(2025, 11, 2, 2, 15, 50, tzinfo=timezone.utc), False),   (datetime(2025, 11, 2, 23, 59, 59, tzinfo=timezone.utc), False), (datetime(2025, 11, 3, 0, 0, 0, tzinfo=timezone.utc), True)]     },
            {"timeframe": Timeframe.WEEK_1,     "last": datetime(2025, 11, 3, 0, 0, 0, tzinfo=timezone.utc),     "checks": [(datetime(2025, 11, 3, 0, 0, 0, tzinfo=timezone.utc), False),     (datetime(2025, 11, 9, 23, 59, 59, tzinfo=timezone.utc), False), (datetime(2025, 11, 10, 0, 0, 0, tzinfo=timezone.utc), True)]    },
            {"timeframe": Timeframe.WEEK_1,     "last": datetime(2025, 11, 6, 15, 50, 40, tzinfo=timezone.utc),  "checks": [(datetime(2025, 11, 6, 15, 50, 40, tzinfo=timezone.utc), False),  (datetime(2025, 11, 9, 23, 59, 59, tzinfo=timezone.utc), False), (datetime(2025, 11, 10, 0, 0, 0, tzinfo=timezone.utc), True)]    },
        ]

        for scenario in scenarios:
            chart = BinanceChart("BTCUSDT", scenario["timeframe"])
            chart.last_seen_candle_dt = scenario["last"]

            for now_dt, expected in scenario["checks"]:
                self.assertEqual(chart.have_new_data(now_dt), expected)

    def test_get_next_candle_time(self):
        cases = [
            (Timeframe.MINUTE_5,  datetime(2025,11,2,20,0,0),  datetime(2025,11,2,20,5,0, tzinfo=timezone.utc)),
            (Timeframe.MINUTE_5,  datetime(2025,11,2,20,2,0),  datetime(2025,11,2,20,5,0, tzinfo=timezone.utc)),
            (Timeframe.MINUTE_15, datetime(2025,11,2,20,0,0),  datetime(2025,11,2,20,15,0, tzinfo=timezone.utc)),
            (Timeframe.MINUTE_15, datetime(2025,11,2,20,1,0),  datetime(2025,11,2,20,15,0, tzinfo=timezone.utc)),
            (Timeframe.MINUTE_30, datetime(2025,11,2,20,0,0),  datetime(2025,11,2,20,30,0, tzinfo=timezone.utc)),
            (Timeframe.MINUTE_30, datetime(2025,11,2,20,10,0), datetime(2025,11,2,20,30,0, tzinfo=timezone.utc)),
            (Timeframe.HOURS_1,   datetime(2025,11,2,20,0,0),  datetime(2025,11,2,21,0,0, tzinfo=timezone.utc)),
            (Timeframe.HOURS_1,   datetime(2025,11,2,20,45,0), datetime(2025,11,2,21,0,0, tzinfo=timezone.utc)),
            (Timeframe.HOURS_2,   datetime(2025,11,2,20,0,0),  datetime(2025,11,2,22,0,0, tzinfo=timezone.utc)),
            (Timeframe.HOURS_2,   datetime(2025,11,2,21,15,0), datetime(2025,11,2,22,0,0, tzinfo=timezone.utc)),
            (Timeframe.HOURS_4,   datetime(2025,11,2,20,0,0),  datetime(2025,11,3,0,0,0, tzinfo=timezone.utc)),
            (Timeframe.HOURS_4,   datetime(2025,11,2,21,30,0), datetime(2025,11,3,0,0,0, tzinfo=timezone.utc)),
            (Timeframe.DAY_1,     datetime(2025,11,2,23,59,59), datetime(2025,11,3,0,0,0, tzinfo=timezone.utc)),
            (Timeframe.WEEK_1,    datetime(2025,11,2,12,0,0),   datetime(2025,11,3,0,0,0, tzinfo=timezone.utc)),
            (Timeframe.WEEK_1,    datetime(2025,11,3,0,0,0),    datetime(2025,11,10,0,0,0, tzinfo=timezone.utc)),
        ]

        for tf, last_dt, expected in cases:
            chart = BinanceChart(symbol="BTCUSDT", timeframe=tf)
            chart.last_seen_candle_dt = last_dt
            result = chart.get_next_candle_time()
            self.assertEqual(result, expected)

    @patch("charts.binance_chart.BinanceAPI.get_candles")
    def test_first_call_hits_api_and_populates_cache(self, mock_get_candles):
        mock_data = [[datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc).timestamp() * 1000, 1, 2, 3, 4, 5]]
        mock_get_candles.return_value = mock_data

        chart = BinanceChart("BTCUSDT", Timeframe.MINUTE_5)
        result = chart.get_recent_raw_ohlcv(10)

        mock_get_candles.assert_called_once()
        self.assertEqual(result, mock_data)
        self.assertEqual(chart.get_current_candle_time(), datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc))
        self.assertIn(("BTCUSDT", Timeframe.MINUTE_5, 10), BinanceChart._shared_ohlcv_cache)        

    @patch("charts.binance_chart.BinanceAPI.get_candles")
    def test_second_call_uses_cache_if_no_new_data(self, mock_get_candles):
        last_ts = datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc)
        cached_data = [[last_ts.timestamp() * 1000, 1, 2, 3, 4, 5]]

        chart = BinanceChart("BTCUSDT", Timeframe.MINUTE_5)
        chart.last_seen_candle_dt = last_ts
        BinanceChart._shared_ohlcv_cache[("BTCUSDT", Timeframe.MINUTE_5, 10)] = (last_ts, cached_data)

        with patch("charts.binance_chart.datetime") as mock_datetime:
            mock_datetime.now.return_value = datetime(2025, 11, 2, 22, 4, 59, tzinfo=timezone.utc)
            mock_datetime.fromtimestamp.side_effect = lambda ts, tz: datetime.fromtimestamp(ts, tz)
            result = chart.get_recent_raw_ohlcv(10)
            mock_get_candles.assert_not_called()
            self.assertEqual(result, cached_data)
            self.assertEqual(chart.get_current_candle_time(), last_ts)

    @patch("charts.binance_chart.BinanceAPI.get_candles")
    def test_cache_expired_when_new_candle_due(self, mock_get_candles):
        old_ts = datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc)
        new_ts = datetime(2025, 11, 2, 22, 5, 0, tzinfo=timezone.utc)
        cached_data = [[old_ts.timestamp() * 1000, 1, 2, 3, 4, 5]]
        new_data = [[new_ts.timestamp() * 1000, 9, 8, 7, 6, 5]]

        chart = BinanceChart("BTCUSDT", Timeframe.MINUTE_5)
        chart.last_seen_candle_dt = old_ts
        BinanceChart._shared_ohlcv_cache[("BTCUSDT", Timeframe.MINUTE_5, 10)] = (old_ts, cached_data)
        mock_get_candles.return_value = new_data

        with patch("charts.binance_chart.datetime") as mock_datetime:
            mock_datetime.now.return_value = new_ts
            mock_datetime.fromtimestamp.side_effect = lambda ts, tz: datetime.fromtimestamp(ts, tz)

            self.assertEqual(chart.get_current_candle_time(), old_ts)
            result = chart.get_recent_raw_ohlcv(10)
            self.assertEqual(result, new_data)
            mock_get_candles.assert_called_once()
            self.assertEqual(chart.get_current_candle_time(), new_ts)

    @patch("charts.binance_chart.BinanceAPI.get_candles")
    def test_different_n_creates_separate_cache(self, mock_get_candles):    
        data_10 = [[datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc).timestamp() * 1000, 1]]
        data_20 = [[datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc).timestamp() * 1000, 2]]
        mock_get_candles.side_effect = [data_10, data_20]

        chart = BinanceChart("BTCUSDT", Timeframe.MINUTE_5)
        result_10 = chart.get_recent_raw_ohlcv(10)
        result_20 = chart.get_recent_raw_ohlcv(20)

        self.assertEqual(result_10, data_10)
        self.assertEqual(result_20, data_20)
        self.assertEqual(mock_get_candles.call_count, 2)

    @patch("charts.binance_chart.BinanceAPI.get_candles")
    def test_different_symbol_or_timeframe_isolated_cache(self, mock_get_candles):
        data_btc = [[datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc).timestamp() * 1000, 1]]
        data_eth = [[datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc).timestamp() * 1000, 2]]
        mock_get_candles.side_effect = [data_btc, data_eth]

        chart_btc = BinanceChart("BTCUSDT", Timeframe.MINUTE_5)
        chart_eth = BinanceChart("ETHUSDT", Timeframe.MINUTE_5)

        result_btc = chart_btc.get_recent_raw_ohlcv(10)
        result_eth = chart_eth.get_recent_raw_ohlcv(10)

        self.assertEqual(result_btc, data_btc)
        self.assertEqual(result_eth, data_eth)
        self.assertEqual(mock_get_candles.call_count, 2)

    @patch("charts.binance_chart.BinanceAPI.get_candles")
    def test_shared_cache_across_instances(self, mock_get_candles):
        # Setup mock API response
        candle_ts = datetime(2025, 11, 2, 22, 0, 0, tzinfo=timezone.utc)
        mock_data = [[candle_ts.timestamp() * 1000, 1, 2, 3, 4, 5]]
        mock_get_candles.return_value = mock_data

        # First chart instance
        chart1 = BinanceChart("BTCUSDT", Timeframe.MINUTE_5)
        chart1.have_new_data = MagicMock(return_value=False)
        result1 = chart1.get_recent_raw_ohlcv(10) # Call the API because nothing is cached yet.

        # Second chart instance with same key
        chart2 = BinanceChart("BTCUSDT", Timeframe.MINUTE_5)
        chart2.have_new_data = MagicMock(return_value=False)
        result2 = chart2.get_recent_raw_ohlcv(10) # Use the cache because it is filled and no new data is available.

        # Assertions
        self.assertEqual(result1, mock_data)
        self.assertEqual(result2, mock_data)
        mock_get_candles.assert_called_once()  # API called only once

class TestBinanceChart(unittest.TestCase):
    def _generate_mock_klines(self, symbol: str, interval: str, limit: int) -> list:
        base_time = 1678886400000  
        data = []

        for i in range(limit):
            t = base_time + (i * 60000)
            o = str(40000.0 + i)
            h = str(40001.0 + i)
            l = str(39999.0 + i)
            c = str(40000.5 + i)
            v = str(100.0 + i)
            data.append([
                t, o, h, l, c, v, 
                t + 59999, str(5000000.0 + i), 1000 + i, str(50.0 + i), str(2500000.0 + i), '0'
            ])
        return data

    def setUp(self):
        self.chart = BinanceChart(symbol="ETHUSDT", timeframe=Timeframe.MINUTE_15)
        self.chart._binance_api = MagicMock()
        self.chart._binance_api.get_current_price.return_value = 999.99
        self.chart._binance_api.get_candles.side_effect = self._generate_mock_klines

    def test_get_current_price_delegation(self):
        price = self.chart.get_current_price()
        self.assertEqual(price, 999.99)
        self.chart._binance_api.get_current_price.assert_called_once_with("ETHUSDT")

    def test_get_raw_ohlcv_interval_mapping(self):
        raw = self.chart.get_recent_raw_ohlcv(10)
        self.assertEqual(len(raw), 10)
        self.chart._binance_api.get_candles.assert_called_once_with(
            symbol="ETHUSDT", interval="15m", limit=10
        )

    def test_invalid_timeframe_raises(self):
        with self.assertRaises(ValueError):
            BinanceChart("ETHUSDT", Timeframe.MINUTE_10)

    def test_02_get_raw_ohlcv_interval_mapping_and_delegation(self):
        n = 7
        raw = self.chart.get_recent_raw_ohlcv(n)
        
        self.assertEqual(len(raw), n)
        self.assertIsInstance(raw[0], list)
        
        self.chart._binance_api.get_candles.assert_called_once_with(
            symbol="ETHUSDT", interval="15m", limit=n
        )

    def test_04_get_recent_candles_data_transformation(self):
        """Tests conversion from raw data (strings) to Candle objects (int/float)."""
        n = 3
        candles = self.chart.get_recent_candles(n)
        
        self.assertEqual(len(candles), n)
        self.assertIsInstance(candles[0], Candle)
        
        # Verify specific data point integrity after conversion (i=0 -> 40000.5)
        self.assertAlmostEqual(candles[0].close, 40000.5)
        self.assertAlmostEqual(candles[2].close, 40002.5) # i=2 -> 40000.5 + 2
        
        # Check data types (conversion must be correct)
        self.assertIsInstance(candles[0].timestamp, int)
        self.assertIsInstance(candles[0].open, float)
        self.assertIsInstance(candles[0].trade_count, int)

    def test_05_get_recent_dataframes_structure_and_index(self):
        """Tests the DataFrame conversion (period + 1 rows, types, and index)."""
        period = 5
        # The method fetches period + 1 = 6 rows
        df = self.chart.get_recent_dataframes(period)
        
        self.assertIsInstance(df, pd.DataFrame)
        self.assertEqual(len(df), period + 1) 
        
        # Check essential columns and data types
        self.assertIn("Open", df.columns)
        self.assertTrue(df["Open"].dtype == float)
        self.assertTrue(df["Close"].dtype == float)
            
        # Check index type
        self.assertTrue(pd.api.types.is_datetime64_any_dtype(df.index))
        self.assertIsInstance(df.index[0], datetime)

    def test_06_get_recent_dataframes_empty_data(self):
        """Tests behavior when the API returns an empty list."""
        
        # Temporarily set the mock to return an empty list for this specific test
        self.chart._binance_api.get_candles.side_effect = lambda *args, **kwargs: []
        
        df = self.chart.get_recent_dataframes(5)
        self.assertTrue(df.empty)
        self.assertIsInstance(df, pd.DataFrame)

    def test_rsi(self):
        self.chart._binance_api.get_candles.side_effect = None
        self.chart._binance_api.get_candles.return_value =  [[1752710400000, '118630.44000000', '120998.71000000', '117453.57000000', '119177.56000000', '15728.57651000', 1752796799999, '1869114355.12316430', 2347985, '7696.17927000', '914659207.57442780', '0'], [1752796800000, '119177.56000000', '120820.71000000', '116812.76000000', '117924.84000000', '19924.66266000', 1752883199999, '2367355518.47030790', 2805236, '8951.37863000', '1063782057.47856260', '0'], [1752883200000, '117924.84000000', '118499.90000000', '117277.34000000', '117840.00000000', '6635.80306000', 1752969599999, '783327898.49696960', 1133382, '2978.38320000', '351626384.05029030', '0'], [1752969600000, '117840.01000000', '118856.80000000', '116467.02000000', '117265.12000000', '12962.92889000', 1753055999999, '1528864683.81608200', 1615935, '6581.33371000', '776457462.98182540', '0'], [1753056000000, '117265.11000000', '119676.73000000', '116515.00000000', '117380.36000000', '17107.33128000', 1753142399999, '2020783266.96336490', 2509543, '8426.31812000', '995117241.66790940', '0'], [1753142400000, 
            '117380.36000000', '120247.80000000', '116128.00000000', '119954.42000000', '20959.12973000', 1753228799999, '2481252763.65191060', 2778733, '10811.45507000', '1280627214.62852240', '0'], [1753228800000, '119954.43000000', '120090.00000000', '117301.00000000', '118755.99000000', '14558.75083000', 1753315199999, '1722126986.88666100', 2101404, '7070.08701000', '836266328.74468310', '0'], [1753315200000, '118756.00000000', '119450.00000000', '117103.10000000', '118340.99000000', '15806.89043000', 1753401599999, '1873181653.20180740', 2081435, '7651.73992000', '906619084.60359310', '0'], [1753401600000, '118340.98000000', '118451.57000000', '114723.16000000', '117614.31000000', 
            '38406.34873000', 1753487999999, '4456778786.62049410', 3282355, '17042.77355000', '1977873720.89647240', '0'], [1753488000000, '117614.31000000', '118297.35000000', '117138.38000000', '117919.99000000', '6991.67206000', 1753574399999, '823629079.74931030', 790372, '3167.88355000', '373290310.21643520', '0'], [1753574400000, '117919.99000000', '119766.65000000', '117825.50000000', '119415.55000000', '9328.30919000', 1753660799999, '1107883542.16079820', 1095080, '5238.30358000', '622261561.25072770', '0'], [1753660800000, '119415.56000000', '119800.00000000', '117427.50000000', '118062.32000000', '13961.74754000', 1753747199999, '1655882235.89651800', 1824777, '7224.91774000', '857128354.22340880', '0'], [1753747200000, '118062.32000000', '119273.36000000', '116950.75000000', '117950.76000000', '15137.93445000', 1753833599999, '1788682083.68564630', 1956694, '7988.93736000', '944162800.07458740', '0'], [1753833600000, '117950.75000000', '118792.00000000', '115796.23000000', '117840.30000000', '15586.73631000', 
            1753919999999, '1832696878.22298590', 1997369, '7803.61434000', '917632890.23365260', '0'], [1753920000000, '117840.29000000', '118922.45000000', '115500.00000000', '115764.08000000', '17010.00730000', 1754006399999, '2002870016.70224260', 1859532, '8313.51616000', '979519362.06854240', '0'], [1754006400000, '115764.07000000', '116052.00000000', '112722.58000000', '113297.93000000', '24487.10206000', 1754092799999, '2810268577.15136990', 4160829, '11487.22120000', '1318593418.06125480', '0'], [1754092800000, '113297.92000000', '114063.49000000', '112003.00000000', '112546.35000000', '11507.33428000', 1754179199999, '1301882737.32672200', 2165714, '5060.00835000', '572586383.07173130', '0'], [1754179200000, '112546.35000000', '114799.97000000', '111920.00000000', '114208.80000000', '7397.76046000', 1754265599999, '841090034.15425410', 1419281, '3738.18331000', '425246221.29553040', '0'], [1754265600000, '114208.81000000', '115720.00000000', '114107.60000000', '115055.03000000', '9667.67916000', 1754351999999, '1109938874.06297080', 1954230, '4715.29351000', '541443274.80937470', '0'], [1754352000000, '115055.03000000', '115127.81000000', '112650.00000000', '114129.75000000', '12042.79078000', 1754438399999, '1371861747.14661660', 2581052, '5622.66754000', '640570774.10106840', '0'], [1754438400000, '114129.75000000', '115716.00000000', '113355.13000000', '114992.27000000', '9761.15318000', 1754524799999, '1118028732.85891840', 2026500, '4872.24748000', '558193207.67707200', '0'], [1754524800000, '114992.27000000', '117621.00000000', '114259.00000000', '117472.01000000', 
            '13468.56263000', 1754611199999, '1564454297.83692700', 2314671, '7008.73753000', '814088870.44463200', '0'], [1754611200000, '117472.02000000', '117630.00000000', '115878.71000000', '116674.74000000', '10045.31278000', 1754697599999, '1172199778.72425470', 2095304, '4584.90574000', '534970598.46875020', '0'], [1754697600000, '116674.74000000', '117944.05000000', '116299.13000000', '116462.25000000', '9514.13144000', 1754783999999, '1111837601.70237220', 1390951, '4869.85416000', '569228301.11699460', '0'], [1754784000000, '116462.25000000', '119311.11000000', '116460.63000000', '119294.01000000', '14322.77073000', 1754870399999, '1694198747.87187080', 2317065, '8023.43513000', '949082473.72132200', '0'], [1754870400000, '119294.27000000', '122335.16000000', '118050.11000000', '118686.00000000', '26494.33429000', 1754956799999, '3194611530.54106930', 4021743, '13243.42946000', '1596640461.64307680', '0'], [1754956800000, '118686.00000000', '120324.43000000', '118207.47000000', '120134.08000000', '16720.10893000', 1755043199999, '1992762473.58525770', 2737841, '9265.05962000', '1104367998.19617160', '0'], [1755043200000, '120134.09000000', '123667.79000000', '118920.92000000', '123306.43000000', '23210.07102000', 1755129599999, '2811581348.38745740', 3712817, '11931.26825000', '1446045988.04831460', '0'], [1755129600000, '123306.44000000', '124474.00000000', '117180.00000000', '118295.09000000', '27980.94758600', 1755215999999, '3359128391.10852380', 4350449, '13402.07847600', '1608719584.86973360', '0'], [1755216000000, '118295.09000000', '119216.82000000', '116803.99000000', '117342.05000000', '13623.33874000', 1755302399999, '1607609329.68510110', 2895016, '6141.41708000', '724799635.81724670', '0'], [1755302400000, '117342.04000000', '117898.99000000', '117143.98000000', '117380.66000000', 
            '6393.68117000', 1755388799999, '751719391.77236380', 1179842, '2995.22865000', '352158781.09645510', '0'], [1755388800000, '117380.66000000', '118575.00000000', '117172.21000000', '117405.01000000', '5898.64192000', 1755475199999, '695629197.90380730', 1177563, '2804.73113000', '330799448.09036540', '0'], [1755475200000, '117405.01000000', '117543.75000000', '114640.14000000', '116227.05000000', '17745.93954000', 1755561599999, '2053814085.47177750', 
            3346280, '7647.70667000', '885108979.48874850', '0'], [1755561600000, '116227.05000000', '116725.69000000', '112732.58000000', '112872.94000000', '18065.47424000', 1755647999999, '2065010895.85846640', 3291182, '8609.41370000', 
            '984093545.59442210', '0'], [1755648000000, '112872.95000000', '114615.38000000', '112380.00000000', '114271.24000000', '15636.34194000', 1755734399999, '1776149566.12477360', 2998370, '7209.58575000', '819330970.21586190', '0'], [1755734400000, '114271.23000000', '114821.76000000', '112015.67000000', '112500.00000000', '10839.69235000', 1755820799999, '1227373788.61556290', 2357380, '5346.48007000', '605400341.45449280', '0'], [1755820800000, '112500.00000000', '117429.05000000', '111684.79000000', '116935.99000000', '23128.09037000', 1755907199999, '2656625122.27778650', 3438518, '11843.59711000', '1359907711.87266930', '0'], [1755907200000, '116936.00000000', '117030.00000000', '114560.00000000', '115438.05000000', '11329.36197000', 1755993599999, '1308825428.01435860', 1559569, '5083.35014000', '587273893.13144330', '0'], [1755993600000, '115438.06000000', '115666.68000000', '110680.00000000', '113493.59000000', '21175.98462000', 1756079999999, '2411284606.18917640', 2573906, '9325.06710000', '1061855201.33431230', '0'], [1756080000000, '113493.59000000', '113667.28000000', '109274.10000000', '110111.98000000', '25182.79379000', 1756166399999, '2805570653.63102300', 4695718, '11387.58170000', '1269662985.34417990', '0'], [1756166400000, '110111.98000000', '112371.00000000', '108666.66000000', '111763.22000000', '18452.43877000', 1756252799999, '2033437347.49993920', 4077474, '9863.43157000', '1087468493.59696390', '0'], [1756252800000, '111763.22000000', '112625.00000000', '110345.42000000', '111262.01000000', '13392.60875000', 1756339199999, '1493774927.19083180', 
            3111496, '6261.84550000', '698586344.17747960', '0'], [1756339200000, '111262.01000000', '113485.90000000', '110862.42000000', '112566.90000000', '11104.27744000', 1756425599999, '1250788481.94532180', 2066780, '5139.46509000', 
            '578866003.68381480', '0'], [1756425600000, '112566.90000000', '112638.64000000', '107463.90000000', '108377.40000000', '22580.31045000', 1756511999999, '2475492492.57752970', 3606959, '10616.35644000', '1164321513.10445710', '0'], [1756512000000, '108377.40000000', '108926.15000000', '107350.10000000', '108816.33000000', '10708.39159000', 
            1756598399999, '1160666772.73875230', 1411040, '5797.17783000', '628457794.84340100', '0'], [1756598400000, '108816.33000000', '109480.02000000', '108076.93000000', '108246.35000000', '9489.51596000', 1756684799999, '1031806894.35133180', 1366633, '4573.61058000', '497406888.16918830', '0'], [1756684800000, '108246.36000000', '109912.40000000', '107255.00000000', '109237.42000000', '16053.60219000', 1756771199999, '1742516638.78113520', 2729384, '7532.99101000', '817730948.98443340', '0'], [1756771200000, '109237.43000000', '111771.52000000', '108393.39000000', '111240.01000000', '18510.28756000', 1756857599999, '2042681451.90163840', 2596328, '9088.71727000', '1003032805.53679950', '0'], [1756857600000, '111240.01000000', '112575.27000000', '110528.71000000', '111705.71000000', '11773.72084000', 1756943999999, '1313762617.34366450', 2214249, '5539.29462000', '618293676.50751790', '0'], [1756944000000, '111705.72000000', '112180.00000000', '109329.12000000', '110730.87000000', '12203.13536000', 1757030399999, '1349031325.53208460', 2230255, '6070.78151000', '670681185.82571010', '0'], [1757030400000, '110730.87000000', '113384.62000000', '110206.96000000', '110659.99000000', '21587.40888000', 1757116799999, '2413132200.62332500', 2970419, '10787.81127000', '1206066261.22720100', '0'], [1757116800000, '110660.00000000', '111307.70000000', '109977.00000000', '110187.97000000', '5000.29897000', 1757203199999, '552785936.54346990', 795201, '2308.83297000', '255237426.94601100', '0'], [1757203200000, '110187.98000000', '111600.00000000', '110180.00000000', '111137.34000000', '5681.29944000', 1757289599999, '630447950.15886890', 874961, '2570.85199000', '285303923.54046230', '0'], [1757289600000, '111137.35000000', '112924.37000000', '110621.78000000', '112065.23000000', '11582.40211000', 1757375999999, '1295903862.46496030', 1744598, '5531.65969000', '618773275.35763070', '0'], [1757376000000, '112065.23000000', '113293.29000000', '110766.66000000', '111546.39000000', '15379.28248000', 1757462399999, '1721465997.90636600', 2143242, '7597.38038000', '849973176.17756840', '0'], [1757462400000, '111546.38000000', '114313.13000000', '110917.45000000', '113960.00000000', '17517.41823000', 1757548799999, '1978834750.22231150', 2182534, '8274.63998000', '934646697.48233240', '0'], [1757548800000, '113960.00000000', '115488.09000000', '113430.00000000', '115482.69000000', '13676.73119000', 1757635199999, '1562241144.95654100', 2166359, '6744.29993000', '770595422.69052130', '0'], [1757635200000, '115482.69000000', '116665.63000000', '114740.99000000', '116029.42000000', '15324.10719000', 
            1757721599999, '1772122269.50186350', 2481491, '7995.57276000', '924775389.85693960', '0'], [1757721600000, '116029.41000000', '116298.78000000', '115127.27000000', '115918.29000000', '8269.40394000', 1757807999999, '957724220.64976110', 1223635, '3590.09359000', '415773029.43935270', '0'], [1757808000000, '115918.29000000', '116165.19000000', '115135.00000000', '115268.01000000', '6707.60197000', 1757894399999, '775762364.96859910', 1237218, '3406.90777000', '393977059.30354210', '0'], [1757894400000, '115268.01000000', '116757.99000000', '114384.00000000', '115349.71000000', '13212.51149000', 1757980799999, '1522648235.22351530', 2857989, '6621.36360000', '763138585.68502490', '0'], [1757980800000, '115349.71000000', '116964.27000000', '114737.11000000', '116788.96000000', '10926.90940000', 1758067199999, '1265779287.51692670', 2047058, '5292.18365000', '613182568.99191850', '0'], [1758067200000, 
            '116788.96000000', '117286.73000000', '114720.81000000', '116447.59000000', '16754.24540000', 1758153599999, '1946083704.62174570', 3227418, '7975.00190000', '926282110.83307900', '0'], [1758153600000, '116447.60000000', '117900.00000000', '116092.76000000', '117073.53000000', '11657.23365000', 1758239999999, '1367513347.48650940', 2252654, '5717.34538000', '670700552.93472770', '0'], [1758240000000, '117073.53000000', '117459.99000000', '115100.00000000', '115632.38000000', '8992.09065000', 1758326399999, '1045792401.45323890', 1732471, '4020.81483000', '467345983.07867990', '0'], [1758326400000, '115632.39000000', '116121.81000000', '115408.47000000', '115685.63000000', '4674.92752000', 1758412799999, '541264273.24168940', 740451, '2276.16483000', '263511469.84325880', '0'], [1758412800000, '115685.63000000', '115819.06000000', '115188.00000000', '115232.29000000', '4511.52219000', 1758499199999, 
            '521299751.15040960', 945965, '2016.72489000', '233031538.74699310', '0'], [1758499200000, '115232.29000000', '115379.25000000', '111800.00000000', '112650.99000000', '20781.71356000', 1758585599999, '2348872511.69887510', 3045876, '9312.35777000', '1052684266.89818760', '0'], [1758585600000, '112650.99000000', '113290.50000000', '111458.73000000', '111998.80000000', '12301.32030000', 1758671999999, '1383869800.27370310', 2455729, '5543.36090000', '623665658.72003280', '0'], [1758672000000, '111998.80000000', '113940.00000000', '111042.66000000', '113307.00000000', '12369.25967000', 1758758399999, '1394470628.50258200', 2229837, '6100.69487000', '687826281.22047700', '0'], [1758758400000, '113307.01000000', '113510.23000000', '108631.51000000', '108994.49000000', '21231.14957000', 1758844799999, '2356639689.92521460', 4409953, '9511.07937000', '1055527535.76844470', '0'], [1758844800000, '108994.49000000', '110300.00000000', '108620.07000000', '109643.46000000', '14243.01591000', 1758931199999, '1557098915.93925960', 3257155, '6978.29033000', '762955442.75240000', '0'], [1758931200000, '109643.46000000', '109743.91000000', '109064.40000000', '109635.85000000', '5501.78643000', 1759017599999, '601947588.99707650', 919594, '2523.25886000', '276080500.99419540', '0'], [1759017600000, '109635.85000000', '112350.00000000', '109189.99000000', '112163.95000000', '7542.33160000', 1759103999999, '832254944.32033530', 1484866, '3781.87606000', '417495757.16935000', '0'], [1759104000000, '112163.96000000', '114400.00000000', '111560.65000000', '114311.96000000', '15541.12005000', 
            1759190399999, '1755247635.87113600', 2442653, '7836.68768000', '884934987.56875300', '0'], [1759190400000, '114311.97000000', '114792.00000000', '112656.27000000', '114048.93000000', '15044.15633000', 1759276799999, '1710713267.13009550', 3018331, '7185.72154000', '817044461.27018150', '0'], [1759276800000, '114048.94000000', '118649.10000000', '113966.67000000', '118594.99000000', '20036.39516000', 1759363199999, '2332096981.26593350', 3430343, '10071.04092000', '1172422657.40651740', '0'], [1759363200000, '118594.99000000', '121022.07000000', '118279.31000000', '120529.35000000', '19670.83503000', 1759449599999, '2349861127.34458050', 3472073, '9753.07848000', '1164986423.98980750', '0'], [1759449600000, '120529.35000000', '123894.99000000', '119248.30000000', '122232.00000000', '23936.32800000', 1759535999999, '2907381076.68131880', 4246820, '11288.62355000', '1372792607.61362140', '0'], [1759536000000, '122232.21000000', '122800.00000000', '121510.00000000', '122391.00000000', '8208.16678000', 1759622399999, '1002272903.34464720', 1703590, '3767.80335000', '460154433.12366190', '0'], [1759622400000, '122390.99000000', '125708.42000000', '122136.00000000', '123482.31000000', '22043.09755300', 1759708799999, '2730817470.93956400', 
            3690670, '11780.67240300', '1459478400.91099630', '0'], [1759708800000, '123482.32000000', '126199.63000000', '123084.00000000', '124658.54000000', '19494.62879300', 1759795199999, '2428828952.26531830', 4206167, '9963.00815300', '1241625129.71771830', '0'], [1759795200000, '124658.54000000', '125126.00000000', '120574.94000000', '121332.95000000', '21633.99385000', 1759881599999, '2657405799.87054860', 4390785, '9699.35099000', '1191947741.69890580', 
            '0'], [1759881600000, '121332.96000000', '124197.25000000', '121066.14000000', '123306.00000000', '17012.61800000', 1759967999999, '2084842842.44161690', 4184997, '9039.06222000', '1107976264.69485960', '0'], [1759968000000, '123306.01000000', '123762.94000000', '119651.47000000', '121662.40000000', '21559.36007000', 1760054399999, '2621438087.56673310', 4231167, '10144.15364000', '1233882833.56423890', '0'], [1760054400000, '121662.41000000', '122550.00000000', '102000.00000000', '112774.50000000', '64171.93927000', 1760140799999, '7349750905.04115730', 11404522, '30502.14297000', '3493298452.84600770', '0'], [1760140800000, '112774.49000000', '113322.39000000', '109561.59000000', '110644.40000000', '35448.51652000', 1760227199999, '3961069473.23113630', 6661929, '15375.94796000', '1718429599.56695220', '0'], [1760227200000, '110644.40000000', '115770.00000000', '109565.06000000', '114958.80000000', '32255.30272000', 1760313599999, '3638546528.74015580', 6048575, '16915.44533000', '1907676479.17725090', '0'], 
            [1760313600000, '114958.81000000', '115963.81000000', '113616.50000000', '115166.00000000', '22557.24033000', 1760399999999, '2591831660.98574920', 5739352, '10710.89723000', '1230950583.84246650', '0'], [1760400000000, '115166.00000000', '115409.96000000', '109866.00000000', '113028.14000000', '31870.32974000', 1760486399999, '3578140778.80849870', 7425642, '14944.19197000', '1677011392.63438070', '0'], [1760486400000, '113028.13000000', '113612.35000000', '110164.00000000', '110763.28000000', '22986.48811000', 1760572799999, '2569639641.35276860', 5243141, '10499.31831000', '1173678794.92077390', '0'], [1760572800000, '110763.28000000', '111982.45000000', '107427.00000000', '108194.28000000', '29857.17252000', 1760659199999, '3277596494.76191940', 6127094, '13126.95119000', '1441416875.12637710', '0'], [1760659200000, '108194.27000000', '109240.00000000', '103528.23000000', '106431.68000000', '37920.66838000', 1760745599999, '4022645635.22120190', 7570685, '17996.99946000', '1909654487.45622080', '0'], [1760745600000, '106431.68000000', '107499.00000000', '106322.20000000', '107185.01000000', '11123.18766000', 1760831999999, '1189002999.14311300', 2105450, '4845.85641000', '518065716.66181290', '0'], [1760832000000, '107185.00000000', '109450.07000000', '106103.36000000', '108642.78000000', '15480.66423000', 1760918399999, '1670074079.58023430', 3205640, '7100.31013000', '766423535.81773780', '0'], [1760918400000, '108642.77000000', '111705.56000000', '107402.52000000', '110532.09000000', '19193.44160000', 1761004799999, '2119912185.59346830', 4283542, '9280.50075000', '1024925788.72169910', '0'], [1761004800000, '110532.09000000', '114000.00000000', '107473.72000000', '108297.67000000', '37228.01659000', 1761091199999, '4114477849.93205410', 6004063, '17034.07155000', '1881327751.33461280', '0'], [1761091200000, '108297.66000000', '109163.88000000', '106666.69000000', '107567.44000000', '28610.78451000', 1761177599999, '3090291706.44398170', 5547903, '13766.58861000', '1487179903.59997880', '0'], [1761177600000, '107567.45000000', '111293.61000000', '107500.00000000', '110078.18000000', '17573.09294000', 1761263999999, '1924582289.41139380', 3721614, '8575.33716000', '938905317.70341070', '0'], [1761264000000, '110078.19000000', '112104.98000000', '109700.01000000', '111004.89000000', '15005.16913000', 1761350399999, '1662806764.95333240', 3241022, 
            '7511.24340000', '832390454.80762260', '0'], [1761350400000, '111004.90000000', '111943.19000000', '110672.86000000', '111646.27000000', '6407.96864000', 1761436799999, '714201332.97512240', 1238199, '3087.08660000', '344113931.79994520', '0'], [1761436800000, '111646.27000000', '115466.80000000', '111260.45000000', '114559.40000000', '13454.47737000', 1761523199999, '1525108635.87482900', 2463951, '6982.18154000', '791462349.35160560', '0'], [1761523200000, '114559.41000000', '116400.00000000', '113830.01000000', '114107.65000000', '21450.23241000', 1761609599999, '2470872744.54896810', 3660488, '10969.70182000', '1263753536.99738980', '0'], [1761609600000, '114107.65000000', '116086.00000000', '112211.00000000', '112898.45000000', '15523.42257000', 1761695999999, '1772753529.86427430', 3829845, '7765.31574000', '887031686.01637250', '0'], [1761696000000, '112898.44000000', '113643.73000000', '109200.00000000', '110021.29000000', '21079.71376000', 1761782399999, '2356715986.53354560', 4481480, '10407.07233000', '1163985607.35690850', '0'], [1761782400000, '110021.30000000', '111592.00000000', '106304.34000000', '108322.88000000', '25988.82838000', 1761868799999, '2827221287.42279770', 6373451, '12551.13144000', '1365671836.74559240', '0'], [1761868800000, '108322.87000000', '111190.00000000', '108275.28000000', '109608.01000000', '21518.20439000', 1761955199999, '2361590437.94141060', 5256872, '10798.53938000', '1185034290.92377970', '0'], [1761955200000, '109608.01000000', '110564.49000000', '109394.81000000', '110098.10000000', '7378.50431000', 1762041599999, '812389216.43467980', 1994214, '3406.68401000', '375126956.08097220', '0'], [1762041600000, '110098.10000000', '111250.01000000', '109471.34000000', '110540.68000000', '12107.00087000', 1762127999999, '1336870531.14150130', 2652188, '5921.86453000', '654016950.25497770', '0'], [1762128000000, '110540.69000000', '110750.00000000', '105306.56000000', '106583.04000000', '28681.18779000', 1762214399999, '3076006652.00156760', 7074546, '12847.08574000', '1377869106.66817760', '0'], [1762214400000, '106583.05000000', '107299.00000000', '98944.36000000', '101497.22000000', '50534.87376000', 1762300799999, '5197697635.21241310', 9099609, '23388.99033000', '2406186713.17052980', '0'], [1762300800000, '101497.23000000', '104534.74000000', '98966.80000000', '103885.16000000', '33778.77571000', 1762387199999, '3454273922.70038500', 6500368, '18126.84828000', '1854232277.03301110', '0'], [1762387200000, '103885.16000000', '104200.00000000', '100300.95000000', '101346.04000000', '25814.62139000', 1762473599999, '2641767846.30582700', 5755001, '11972.54796000', '1225474173.02042840', '0'], [1762473600000, '101346.04000000', '104096.36000000', '99260.86000000', '103339.08000000', '32059.50942000', 1762559999999, '3251112979.30588400', 6335759, '16056.80582000', '1629564159.11657990', '0'], [1762560000000, '103339.09000000', '103406.22000000', '101454.00000000', '102311.73000000', '12376.60256000', 1762646399999, '1265715198.19165660', 2740804, '5855.88338000', '598918112.96800550', '0']]
        
        # Same as TradingView at the time this data was captured.
        self.assertAlmostEqual(self.chart.get_rsi(14), 37.68403365647134)


        self.chart._binance_api.get_candles.return_value = [[1762236000000, '104215.76000000', '105201.00000000', '104200.00000000', '104766.14000000', '2382.47316000', 1762239599999, '249454222.89657350', 357622, '1198.62447000', '125504339.07677220', '0'], [1762239600000, '104766.14000000', '104997.64000000', '104317.56000000', '104490.72000000', '1633.60477000', 1762243199999, '170881497.11571010', 277938, '825.65011000', '86357032.20805210', '0'], [1762243200000, '104490.73000000', '104631.39000000', '103759.99000000', '104051.90000000', '1804.04853000', 1762246799999, '187949961.51984550', 323667, '736.00928000', '76696467.95009080', '0'], [1762246800000, '104051.90000000', '104138.65000000', '103636.00000000', '103857.96000000', '1455.72161000', 1762250399999, '151236916.91843210', 277311, '586.40434000', '60933243.36188970', '0'], [1762250400000, '103857.96000000', '104106.55000000', '103605.00000000', '103816.39000000', '1073.24239000', 1762253999999, '111391528.76030620', 287433, '453.16126000', '47036430.90085510', '0'], [1762254000000, '103816.39000000', '104699.07000000', '103774.33000000', '104584.76000000', '988.08793000', 1762257599999, '103067238.93782860', 245790, '580.55256000', '60561072.68142480', '0'], [1762257600000, '104584.75000000', '104638.29000000', '103844.39000000', '103952.54000000', '1216.95881000', 1762261199999, '126729264.09250430', 237611, '612.73444000', '63800851.97517530', '0'], [1762261200000, '103952.54000000', '104243.67000000', '103576.00000000', '103924.25000000', '1018.30395000', 1762264799999, '105783943.40432080', 255475, '387.55326000', '40272823.11600910', '0'], [1762264800000, '103924.26000000', '104694.28000000', '102915.05000000', '104500.01000000', '2915.82303000', 1762268399999, '302284273.32694020', 459051, '1298.77426000', '134722429.92614820', '0'], [1762268400000, '104500.01000000', '104842.63000000', '103185.89000000', '103197.01000000', '2271.81312000', 1762271999999, '236586744.20442310', 474489, '1070.68164000', '111547638.46053870', '0'], [1762272000000, '103197.02000000', '103500.05000000', '102164.00000000', '102257.70000000', '3313.32683000', 1762275599999, '340634523.35689600', 562206, '1289.48733000', '132596188.29272820', '0'], [1762275600000, '102257.70000000', '102257.70000000', '100800.00000000', '101114.83000000', '4223.40802000', 1762279199999, '428470955.46941760', 663485, '1817.30565000', '184336938.07732300', '0'], [1762279200000, '101114.82000000', '101492.74000000', '100010.73000000', '101363.98000000', '4101.41064000', 1762282799999, '413018514.74466230', 625911, '1807.90749000', '182126082.53774020', '0'], [1762282800000, '101363.97000000', '101711.84000000', '100414.00000000', '100542.64000000', '1814.79036000', 1762286399999, '183434047.28402390', 466508, '920.80932000', '93100254.75362400', '0'], [1762286400000, '100542.64000000', '101119.40000000', '99600.00000000', '100755.43000000', '4335.57159000', 1762289999999, '434923219.27642940', 599202, '2011.16256000', '201871975.23161480', '0'], [1762290000000, '100755.42000000', '100831.49000000', '98944.36000000', '100311.46000000', '4105.76650000', 1762293599999, '409707603.03082540', 530430, '1937.98055000', '193498397.99620770', '0'], [1762293600000, '100311.46000000', '101893.09000000', '100082.00000000', '101295.71000000', '2258.84809000', 1762297199999, '228253667.64408610', 383304, '1224.26678000', '123711717.59992360', '0'], [1762297200000, '101295.70000000', '101740.00000000', '100907.36000000', '101497.22000000', '1518.90709000', 1762300799999, '153914699.36998970', 233347, '943.06182000', '95577482.59034180', '0'], [1762300800000, '101497.23000000', '101752.96000000', '100350.00000000', '100564.30000000', '1452.38181000', 1762304399999, '146570803.54159430', 325593, '696.30472000', '70295605.15352610', '0'], [1762304400000, '100564.30000000', '101015.01000000', '98966.80000000', '100761.62000000', '3025.00486000', 1762307999999, '301950510.35940390', 522828, '1390.55257000', '138857475.75595550', '0'], [1762308000000, '100761.62000000', '101922.98000000', '100754.54000000', '101677.93000000', '3700.99085000', 1762311599999, '375285834.35778960', 471966, '2179.53607000', '221050816.74234640', '0'], [1762311600000, '101677.94000000', '102272.23000000', '101461.98000000', '102130.00000000', '2834.46709000', 1762315199999, '289059113.48833610', 353352, '1728.02857000', '176230486.41992610', '0'], [1762315200000, '102130.00000000', '102236.92000000', '101517.47000000', '101998.30000000', '2059.55564000', 1762318799999, '209940730.21261220', 261156, '1256.54626000', '128107387.26696730', '0'], [1762318800000, '101998.30000000', '102370.00000000', '101595.00000000', '101824.89000000', '1088.37371000', 1762322399999, '110963237.77415570', 226259, '615.84482000', '62797527.74170360', '0'], [1762322400000, '101824.89000000', '102139.36000000', '101500.00000000', '102119.99000000', '869.66608000', 1762325999999, '88544235.21881710', 196878, '537.06788000', '54684829.23326300', '0'], [1762326000000, '102120.00000000', '102152.58000000', '101601.71000000', '101993.02000000', '644.24535000', 1762329599999, '65649031.62615090', 167147, '336.71586000', '34311908.33222840', '0'], [1762329600000, '101993.03000000', '102000.02000000', '101176.47000000', '101699.74000000', '1179.77273000', 1762333199999, '119846849.02427830', 275371, '538.27264000', '54683918.67907820', '0'], [1762333200000, '101699.74000000', '102203.48000000', '101608.00000000', '101995.29000000', '785.11664000', 1762336799999, '80013947.64783450', 244906, '382.39385000', '38975610.94523450', '0'], [1762336800000, '101995.28000000', '101995.29000000', '101285.09000000', '101401.97000000', '724.99165000', 1762340399999, '73703110.33863780', 230243, '332.02398000', '33752316.87610950', '0'], [1762340400000, '101401.97000000', '102110.48000000', '101381.68000000', '102070.61000000', '887.62047000', 1762343999999, '90349664.26228100', 201205, '454.40746000', '46266350.62952320', '0'], [1762344000000, '102070.62000000', '102800.71000000', '101916.77000000', '102673.35000000', '1241.26951000', 1762347599999, '127120430.59674440', 253068, '722.42964000', '73990168.29950620', '0'], [1762347600000, '102673.34000000', '103253.39000000', '102291.82000000', '102985.91000000', '1451.58240000', 1762351199999, '149133124.36268100', 272356, '833.41291000', '85635488.60439400', '0'], [1762351200000, '102985.90000000', '103470.00000000', '102169.06000000', '103202.30000000', '1801.60223000', 1762354799999, '185347567.59692970', 394964, '922.45746000', '94920486.36561290', '0'], [1762354800000, '103202.30000000', '103798.37000000', '102829.51000000', '103728.30000000', '1851.46451000', 1762358399999, '191425685.22779390', 431127, '895.53407000', '92601996.86968000', '0'], [1762358400000, '103728.30000000', '104039.66000000', '103057.56000000', '103919.20000000', '1677.80348000', 1762361999999, '173897697.56666970', 330986, '868.95528000', '90077181.33284420', '0'], [1762362000000, '103919.20000000', '104000.00000000', '103388.46000000', '103904.05000000', '1795.89346000', 1762365599999, '186212145.72645740', 266922, '973.84041000', '100982118.48719390', '0'], [1762365600000, '103904.05000000', '104429.75000000', '103759.53000000', '104347.40000000', '1222.46217000', 1762369199999, '127253227.53865750', 248847, '718.27782000', '74767920.79003410', '0'], [1762369200000, '104347.41000000', '104529.41000000', '103986.96000000', '104008.09000000', '796.61274000', 1762372799999, '83048683.26227220', 177400, '409.07710000', '42650224.73223000', '0'], [1762372800000, '104008.09000000', '104534.74000000', '103620.00000000', '103831.22000000', '881.47869000', 1762376399999, '91663646.16364950', 209777, '449.03121000', '46699699.62087710', '0'], [1762376400000, '103831.22000000', '103831.22000000', '103500.80000000', '103672.37000000', '586.96502000', 1762379999999, '60844102.85884950', 176109, '274.78446000', '28487175.03012220', '0'], [1762380000000, '103672.38000000', '103798.95000000', '103305.05000000', '103706.55000000', 
            '686.44411000', 1762383599999, '71077341.43399190', 130535, '318.67953000', '32998244.45868660', '0'], [1762383600000, '103706.55000000', '104100.00000000', '103667.26000000', '103885.16000000', '533.01051000', 1762387199999, '55373202.51379690', 131373, '292.67371000', '30407338.66596810', '0'], [1762387200000, '103885.16000000', '103897.86000000', '103324.21000000', '103677.72000000', '1223.43533000', 1762390799999, '126682517.57375300', 197552, '569.01089000', '58931629.63061780', '0'], [1762390800000, '103677.71000000', '103677.72000000', '102716.26000000', '103365.65000000', '1156.07343000', 1762394399999, '119203566.19663220', 209569, '443.61298000', '45755330.02483310', '0'], [1762394400000, '103365.64000000', '103567.93000000', '102855.66000000', '103321.81000000', '711.05988000', 1762397999999, '73402219.52186860', 203928, '309.23405000', '31925222.02593220', '0'], [1762398000000, '103321.80000000', '103933.33000000', '103315.48000000', '103636.03000000', '691.22573000', 1762401599999, '71641410.95429530', 169374, '428.13687000', '44367693.53722740', '0'], [1762401600000, '103636.92000000', '104200.00000000', '103580.00000000', '104030.79000000', '671.34024000', 1762405199999, '69737412.93120900', 121899, '386.06688000', '40102650.57059450', '0'], [1762405200000, '104030.80000000', '104030.80000000', '103088.00000000', '103143.57000000', '755.30818000', 1762408799999, '78190952.35513860', 172800, '289.19095000', '29916912.61180200', '0'], [1762408800000, '103143.57000000', '103591.47000000', '103006.17000000', '103318.75000000', '555.63033000', 1762412399999, '57417716.67537140', 168897, '294.13001000', '30393683.13160890', '0'], [1762412400000, '103318.76000000', '103561.94000000', '102910.66000000', '103185.48000000', '988.58677000', 1762415999999, '102016190.85638880', 228244, '470.80231000', '48589641.70851420', '0'], [1762416000000, '103184.75000000', '103440.00000000', '102971.99000000', '103200.26000000', '647.13062000', 1762419599999, '66784900.93099830', 169514, '310.65808000', '32063906.70109750', 
            '0'], [1762419600000, '103200.26000000', '103261.93000000', '102810.00000000', '102810.01000000', '536.64925000', 
            1762423199999, '55271407.17138010', 168660, '252.39466000', '25994164.68959070', '0'], [1762423200000, '102810.01000000', '103288.59000000', '102651.63000000', '103122.54000000', '932.94397000', 1762426799999, '96025789.72081780', 146842, '381.88738000', '39324033.75366910', '0'], [1762426800000, '103122.54000000', '103300.01000000', '102743.82000000', '103227.58000000', '540.52931000', 1762430399999, '55715007.95831110', 116103, '273.33391000', '28175966.26725600', '0'], [1762430400000, '103227.59000000', '103333.18000000', '102383.64000000', '102552.38000000', '1051.14565000', 1762433999999, '108029118.91729590', 191008, '506.74309000', '52069667.88418600', '0'], [1762434000000, '102552.39000000', '103626.46000000', '102552.38000000', '103319.71000000', '941.18298000', 1762437599999, '97133099.68168520', 245056, '474.64674000', '48976505.02036210', '0'], [1762437600000, '103319.71000000', '103579.68000000', '102044.63000000', '102125.00000000', '1661.00797000', 1762441199999, '170484641.36058270', 409701, '762.91799000', '78313706.27666970', '0'], [1762441200000, '102124.99000000', '102932.94000000', '101630.00000000', '102014.48000000', '3027.20967000', 1762444799999, '309275798.94860380', 578086, '1333.43765000', '136211327.11928060', '0'], [1762444800000, '102014.49000000', '102393.51000000', '100300.95000000', '100867.20000000', '3035.72721000', 1762448399999, '307264303.98915810', 502070, '1363.65935000', '138009506.81565600', '0'], [1762448400000, '100867.19000000', '101946.31000000', '100770.57000000', '101804.01000000', '1310.77048000', 1762451999999, '132832015.63575380', 423293, '662.44406000', '67142638.22894070', '0'], [1762452000000, '101804.02000000', '102338.00000000', '100916.74000000', '101722.13000000', '956.16247000', 1762455599999, '97128883.02653900', 305594, '478.94707000', '48654299.09741960', '0'], [1762455600000, '101722.12000000', '101999.44000000', '101202.73000000', '101388.81000000', '756.60374000', 1762459199999, '76887820.02559040', 255989, '367.82673000', '37387471.61291160', '0'], [1762459200000, '101388.82000000', '101643.28000000', '100638.55000000', '100914.11000000', '812.36283000', 1762462799999, '82127009.86715830', 272242, '370.48924000', '37455181.35431730', '0'], [1762462800000, '100914.11000000', '101220.90000000', '100541.17000000', '101117.17000000', '938.29195000', 1762466399999, '94674510.93831910', 198808, '437.93414000', '44190719.51078570', '0'], [1762466400000, '101117.17000000', '101480.00000000', '101009.70000000', '101415.05000000', '639.89634000', 1762469999999, '64780913.62381160', 137810, '335.63089000', '33977254.83355100', '0'], [1762470000000, '101415.05000000', '101538.00000000', '101132.60000000', '101346.04000000', '1274.34706000', 1762473599999, '129060637.44516490', 161962, '469.41204000', '47545060.61360470', '0'], [1762473600000, '101346.04000000', '101640.00000000', '100749.94000000', '101479.78000000', '823.54705000', 1762477199999, '83402389.68238740', 265377, '403.93762000', '40917127.64705690', '0'], [1762477200000, '101479.79000000', '101894.83000000', '100905.10000000', '101538.96000000', '1095.04627000', 1762480799999, '110984810.45815980', 285086, '582.41591000', '59030892.19108520', '0'], [1762480800000, '101538.96000000', '101928.99000000', '101242.79000000', '101905.11000000', '779.48744000', 1762484399999, '79172360.30952400', 192983, '426.18870000', '43298799.94390360', '0'], 
            [1762484400000, '101905.12000000', '102500.00000000', '101876.03000000', '101916.29000000', '1267.53296000', 1762487999999, '129528549.94771780', 200037, '716.33328000', '73202925.99749890', '0'], [1762488000000, '101916.30000000', '102100.25000000', '101582.92000000', '102027.19000000', '798.08441000', 1762491599999, '81283959.07417850', 134097, '429.77761000', '43791115.37055380', '0'], [1762491600000, '102027.20000000', '102527.00000000', '102024.75000000', '102447.47000000', '701.21696000', 1762495199999, '71768706.41709210', 148391, '376.66428000', '38546127.70674940', '0'], [1762495200000, '102447.48000000', '102496.00000000', '101819.10000000', '101819.10000000', '469.88373000', 1762498799999, '48006594.62379220', 100898, '164.75868000', '16838107.75293440', '0'], [1762498800000, 
            '101819.11000000', '102010.00000000', '101638.43000000', '102010.00000000', '1093.42589000', 1762502399999, '111412024.67941620', 126376, '603.31633000', '61478191.01621720', '0'], [1762502400000, '102009.99000000', '102050.00000000', '101438.39000000', '101496.18000000', '817.45963000', 1762505999999, '83185977.42538760', 139705, '406.68259000', '41383090.55451700', '0'], [1762506000000, '101496.18000000', '101512.51000000', '100775.65000000', '101013.66000000', '1382.92001000', 1762509599999, '139844929.81392250', 208421, '678.67279000', '68633699.98171700', '0'], [1762509600000, '101013.67000000', '101250.03000000', '100564.43000000', '100770.85000000', '1279.53134000', 1762513199999, '128970986.25818860', 184343, '499.31590000', '50335833.20219800', '0'], [1762513200000, '100770.85000000', '100796.86000000', '99803.58000000', '100411.89000000', '3120.50016000', 1762516799999, '312664400.67140860', 386174, '1294.42273000', '129641767.61866590', '0'], [1762516800000, '100411.89000000', '100625.00000000', '99260.86000000', '99638.28000000', '1799.68202000', 1762520399999, '179690072.82481380', 350114, '764.81179000', '76375121.64023070', '0'], [1762520400000, '99638.29000000', '100579.72000000', '99455.10000000', '100347.35000000', '1635.46609000', 1762523999999, '163774307.96598570', 353380, '899.19792000', '90055367.09835950', '0'], [1762524000000, '100347.35000000', '100922.78000000', '99519.32000000', '100806.08000000', '2597.13075000', 1762527599999, '260550417.39014200', 505647, '1222.09911000', '122622509.32902250', '0'], [1762527600000, '100806.70000000', '101253.99000000', '100353.45000000', '100797.95000000', '2600.73788000', 1762531199999, '262249379.73434360', 527910, 
            '1262.48740000', '127306940.67644210', '0'], [1762531200000, '100797.95000000', '101628.43000000', '100517.06000000', '101169.20000000', '1975.20246000', 1762534799999, '199788762.94751510', 411079, '999.32635000', '101095304.17988280', '0'], [1762534800000, '101169.19000000', '102736.84000000', '100942.73000000', '102397.12000000', '2091.96075000', 1762538399999, '213497879.72927480', 422158, '1222.84723000', '124799912.98915790', '0'], [1762538400000, '102397.13000000', '102859.99000000', '102282.20000000', '102609.46000000', '1585.11088000', 1762541999999, '162617827.52423450', 385142, '909.37754000', '93296887.19450760', '0'], [1762542000000, '102609.46000000', '103395.25000000', '102481.75000000', '103395.25000000', '1184.29403000', 1762545599999, '121964007.37115810', 284347, '682.05318000', '70251486.80846820', '0'], [1762545600000, '103395.92000000', '103900.00000000', '102958.00000000', '103783.09000000', '970.62813000', 1762549199999, '100440870.66301160', 300374, '546.73990000', '56591932.30469590', 
            '0'], [1762549200000, '103783.08000000', '103879.23000000', '103311.33000000', '103879.23000000', '743.31566000', 
            1762552799999, '76931862.06413570', 157056, '393.93069000', '40778086.99255260', '0'], [1762552800000, '103879.22000000', '104096.36000000', '103595.38000000', '103633.03000000', '736.65333000', 1762556399999, '76512635.04616610', 138300, '354.69445000', '36853507.56826350', '0'], [1762556400000, '103633.04000000', '103759.36000000', '103329.79000000', '103339.08000000', '510.69159000', 1762559999999, '52869266.68392770', 128364, '216.75384000', '22439423.35189930', '0'], [1762560000000, '103339.09000000', '103406.22000000', '102539.49000000', '102713.15000000', '877.26495000', 1762563599999, '90373017.55796000', 204367, '370.61768000', '38172784.40358140', '0'], [1762563600000, '102713.15000000', '103240.32000000', '102662.25000000', '102996.84000000', '498.24095000', 1762567199999, '51318525.41978020', 151285, '266.16392000', '27416331.43080920', '0'], [1762567200000, '102996.85000000', '103333.33000000', '102766.31000000', '102846.65000000', '494.72835000', 1762570799999, '51000514.17586280', 139744, '240.25685000', '24772583.91970390', '0'], [1762570800000, '102846.66000000', '103293.21000000', '102592.75000000', '102592.76000000', '531.57226000', 1762574399999, '54701753.95670340', 134176, '236.67566000', '24359660.24507190', '0'], [1762574400000, '102592.76000000', '102836.00000000', '102409.52000000', '102565.03000000', '602.92361000', 1762577999999, '61875484.77768800', 146103, '282.12219000', '28957305.78198390', '0'], [1762578000000, '102565.03000000', '102733.83000000', '102272.66000000', '102304.00000000', '396.06427000', 1762581599999, '40595664.73097090', 
            112641, '175.47082000', '17986655.20162580', '0'], [1762581600000, '102304.01000000', '102519.03000000', '102092.26000000', '102215.62000000', '590.77493000', 1762585199999, '60432455.89917180', 133123, '257.61903000', '26355451.19494380', '0'], [1762585200000, '102215.63000000', '102399.88000000', '101902.64000000', '102352.96000000', '452.19970000', 1762588799999, '46192573.53941690', 84560, '211.55086000', '21614678.50461780', '0'], [1762588800000, 
            '102352.96000000', '102687.72000000', '102156.36000000', '102431.74000000', '470.18368000', 1762592399999, '48177544.12934000', 73989, '289.09191000', '29623099.65489780', '0'], [1762592400000, '102431.74000000', '102615.53000000', '102225.52000000', '102399.46000000', '359.62626000', 1762595999999, '36831975.84473800', 73280, '191.11262000', '19576084.63691700', '0'], [1762596000000, '102399.45000000', '102575.35000000', '102310.00000000', '102480.04000000', '301.03917000', 1762599599999, '30846532.12191840', 56842, '154.67875000', '15850407.29257160', '0'], [1762599600000, '102480.04000000', '102630.14000000', '101715.76000000', '101857.10000000', '707.36146000', 1762603199999, '72238672.14827160', 108097, '311.36673000', '31820783.82870010', '0'], [1762603200000, '101857.10000000', '102108.00000000', '101731.19000000', '102065.14000000', '439.24627000', 1762606799999, '44783531.93717810', 112243, '253.30837000', '25827544.31441240', '0'], [1762606800000, '102065.14000000', '102186.99000000', '101720.67000000', '101804.63000000', '952.83284000', 1762610399999, '97160478.98592720', 165922, '388.22595000', '39588605.14935170', '0'], [1762610400000, '101804.62000000', '102083.67000000', '101454.00000000', '101827.19000000', '1159.38189000', 1762613999999, '117940827.76229630', 182143, '554.12424000', '56367938.52794310', '0'], [1762614000000, '101827.19000000', '101954.00000000', '101500.00000000', '101711.45000000', '511.67056000', 1762617599999, '52035960.58358720', 139278, '227.04828000', '23090370.85282360', '0'], [1762617600000, '101711.46000000', '101963.66000000', '101525.98000000', '101850.22000000', '502.57143000', 1762621199999, '51159130.68425430', 148968, '226.90759000', '23096362.89568580', '0'], [1762621200000, '101850.23000000', '102003.57000000', '101549.85000000', '101994.52000000', '479.97599000', 1762624799999, '48867669.35129350', 116501, '257.36081000', '26205731.21547840', '0'], [1762624800000, '101994.53000000', '102219.39000000', '101824.86000000', '102139.53000000', '766.44634000', 1762628399999, '78187462.39734860', 101144, '395.11988000', '40308399.32402030', '0'], [1762628400000, '102139.52000000', '102186.87000000', '101522.08000000', '101989.65000000', '371.41335000', 1762631999999, '37839284.35658650', 99404, '140.83144000', '14343707.63637590', '0'], [1762632000000, '101989.65000000', '102172.35000000', '101957.94000000', '102068.06000000', '206.62460000', 1762635599999, '21091484.24514780', 60571, '90.13500000', '9201117.76807230', 
            '0'], [1762635600000, '102068.06000000', '102367.72000000', '102028.62000000', '102272.81000000', '234.42240000', 
            1762639199999, '23961429.86303480', 70041, '106.19741000', '10855204.15198920', '0'], [1762639200000, '102272.82000000', '102426.12000000', '102171.73000000', '102377.46000000', '249.46029000', 1762642799999, '25519827.66659450', 60433, '123.37929000', '12621690.73845100', '0'], [1762642800000, '102377.46000000', '102482.20000000', '102276.82000000', '102312.94000000', '234.75430000', 1762646399999, '24033763.24019930', 68964, '113.29449000', '11598856.69711880', '0'], [1762646400000, '102312.95000000', '102337.89000000', '102006.34000000', '102044.14000000', '210.17961000', 1762649999999, '21476875.47884860', 36758, '46.65629000', '4767905.86864120', '0']]
        
        # Same as TradingView at the time this data was captured.
        self.assertAlmostEqual(self.chart.get_rsi(14), 47.53646475069678)

    def test_sma(self):
        self.chart._binance_api.get_candles.side_effect = None
        self.chart._binance_api.get_candles.return_value = [[1762614000000, '101827.19000000', '101954.00000000', '101500.00000000', '101711.45000000', '511.67056000', 1762617599999, '52035960.58358720', 139278, '227.04828000', '23090370.85282360', '0'], [1762617600000, '101711.46000000', '101963.66000000', '101525.98000000', '101850.22000000', '502.57143000', 1762621199999, '51159130.68425430', 148968, '226.90759000', '23096362.89568580', '0'], [1762621200000, '101850.23000000', '102003.57000000', '101549.85000000', '101994.52000000', '479.97599000', 1762624799999, '48867669.35129350', 116501, '257.36081000', '26205731.21547840', '0'], [1762624800000, '101994.53000000', '102219.39000000', '101824.86000000', '102139.53000000', '766.44634000', 1762628399999, '78187462.39734860', 101144, '395.11988000', '40308399.32402030', '0'], [1762628400000, '102139.52000000', '102186.87000000', '101522.08000000', '101989.65000000', '371.41335000', 1762631999999, '37839284.35658650', 99404, '140.83144000', '14343707.63637590', '0'], [1762632000000, '101989.65000000', '102172.35000000', '101957.94000000', '102068.06000000', '206.62460000', 1762635599999, '21091484.24514780', 60571, '90.13500000', '9201117.76807230', '0'], [1762635600000, '102068.06000000', '102367.72000000', '102028.62000000', '102272.81000000', '234.42240000', 1762639199999, '23961429.86303480', 70041, '106.19741000', '10855204.15198920', '0'], [1762639200000, '102272.82000000', '102426.12000000', '102171.73000000', '102377.46000000', '249.46029000', 1762642799999, '25519827.66659450', 60433, '123.37929000', '12621690.73845100', '0'], [1762642800000, '102377.46000000', '102482.20000000', '102276.82000000', '102312.94000000', '234.75430000', 1762646399999, '24033763.24019930', 68964, '113.29449000', '11598856.69711880', '0'], [1762646400000, '102312.95000000', '102337.89000000', '101620.23000000', '101731.47000000', '381.11906000', 1762649999999, '38877621.91667430', 83294, '98.52883000', '10047852.23530140', '0']]
        
        # Same as TradingView at the time this data was captured.
        self.assertEqual(self.chart.get_sma(9), 102081.85111111111)

    def test_ema(self):
        self.chart._binance_api.get_candles.side_effect = None
        self.chart._binance_api.get_candles.return_value = [[1762614000000, '101827.19000000', '101954.00000000', '101500.00000000', '101711.45000000', '511.67056000', 1762617599999, '52035960.58358720', 139278, '227.04828000', '23090370.85282360', '0'], [1762617600000, '101711.46000000', '101963.66000000', '101525.98000000', '101850.22000000', '502.57143000', 1762621199999, '51159130.68425430', 148968, '226.90759000', '23096362.89568580', '0'], [1762621200000, '101850.23000000', '102003.57000000', '101549.85000000', '101994.52000000', '479.97599000', 1762624799999, '48867669.35129350', 116501, '257.36081000', '26205731.21547840', '0'], [1762624800000, '101994.53000000', '102219.39000000', '101824.86000000', '102139.53000000', '766.44634000', 1762628399999, '78187462.39734860', 101144, '395.11988000', '40308399.32402030', '0'], [1762628400000, '102139.52000000', '102186.87000000', '101522.08000000', '101989.65000000', '371.41335000', 1762631999999, '37839284.35658650', 99404, '140.83144000', '14343707.63637590', '0'], [1762632000000, '101989.65000000', '102172.35000000', '101957.94000000', '102068.06000000', '206.62460000', 1762635599999, '21091484.24514780', 60571, '90.13500000', '9201117.76807230', '0'], [1762635600000, '102068.06000000', '102367.72000000', '102028.62000000', '102272.81000000', '234.42240000', 1762639199999, '23961429.86303480', 70041, '106.19741000', '10855204.15198920', '0'], [1762639200000, '102272.82000000', '102426.12000000', '102171.73000000', '102377.46000000', '249.46029000', 1762642799999, '25519827.66659450', 60433, '123.37929000', '12621690.73845100', '0'], [1762642800000, '102377.46000000', '102482.20000000', '102276.82000000', '102312.94000000', '234.75430000', 1762646399999, '24033763.24019930', 68964, '113.29449000', '11598856.69711880', '0'], [1762646400000, '102312.95000000', '102337.89000000', '101620.23000000', '101880.00000000', '414.51024000', 1762649999999, '42276955.45891260', 94375, '118.03317000', '12033933.03363580', '0']]
        
        # Same as TradingView at the time this data was captured.
        self.assertEqual(self.chart.get_ema(9), 102039.70133333333)
    
    def test_volatality(self):
        self.chart._binance_api.get_candles.side_effect = None
        self.chart._binance_api.get_candles.return_value = [[1762632000000, '101989.65000000', '102172.35000000', '101957.94000000', '102068.06000000', '206.62460000', 1762635599999, '21091484.24514780', 60571, '90.13500000', '9201117.76807230', '0'], [1762635600000, '102068.06000000', '102367.72000000', '102028.62000000', '102272.81000000', '234.42240000', 1762639199999, '23961429.86303480', 70041, '106.19741000', '10855204.15198920', '0'], [1762639200000, '102272.82000000', '102426.12000000', '102171.73000000', '102377.46000000', '249.46029000', 1762642799999, '25519827.66659450', 60433, '123.37929000', '12621690.73845100', '0'], [1762642800000, '102377.46000000', '102482.20000000', '102276.82000000', '102312.94000000', '234.75430000', 1762646399999, '24033763.24019930', 68964, '113.29449000', '11598856.69711880', '0'], [1762646400000, '102312.95000000', '102337.89000000', '101620.23000000', '101947.78000000', '461.44495000', 1762649999999, '47061339.84141870', 101164, '153.52620000', '15651983.18024240', '0']]
        
        # Does not exist officially on TradingView as an indicator.
        self.assertEqual(self.chart.get_volatility(5), 180.61291675846698)

    def test_macd(self):
        self.chart._binance_api.get_candles.side_effect = None
        self.chart._binance_api.get_candles.return_value = [[1750982400000, '106947.06000000', '107735.34000000', '106356.76000000', '107047.59000000', '12232.44042000', 1751068799999, '1308420348.91000950', 2304499, '4862.28010000', '520251258.37876640', '0'], [1751068800000, '107047.58000000', '107577.75000000', '106811.51000000', '107296.79000000', '3282.17352000', 1751155199999, '352025390.60311350', 653305, '1514.41959000', '162441164.01323960', '0'], [1751155200000, '107296.79000000', '108528.50000000', '107172.52000000', '108356.93000000', '6831.73640000', 1751241599999, '736708189.94956840', 1223202, '3771.10895000', '406653127.09208040', '0'], [1751241600000, '108356.93000000', '108789.99000000', '106733.33000000', '107146.50000000', '9754.12491000', 1751327999999, '1050407152.34505800', 1773485, '4331.38130000', '466474537.78821220', '0'], [1751328000000, '107146.51000000', '107540.00000000', '105250.85000000', '105681.14000000', '10505.62437000', 1751414399999, '1117432945.89263660', 2013289, '4648.91727000', '494549276.18377850', '0'], [1751414400000, '105681.13000000', 
            '109730.00000000', '105100.19000000', '108849.60000000', '17691.89592000', 1751500799999, '1915699005.87728970', 2444708, '9248.43029000', '1002261738.20887520', '0'], [1751500800000, '108849.59000000', '110529.18000000', '108530.40000000', '109584.78000000', 
            '13047.08225000', 1751587199999, '1429459048.63832610', 2568944, '6961.89686000', '763022147.91167700', '0'], [1751587200000, '109584.77000000', '109767.59000000', '107245.00000000', '107984.24000000', '11793.86615000', 1751673599999, '1276215111.66836520', 1975212, '4787.79822000', '518313226.96675600', '0'], [1751673600000, '107984.25000000', '108420.56000000', '107756.31000000', '108198.12000000', '3736.97570000', 1751759999999, '403928702.19674760', 710020, '1803.68528000', '194976807.36330110', '0'], [1751760000000, '108198.12000000', '109700.00000000', '107800.01000000', '109203.84000000', '6447.60700000', 1751846399999, '700733299.51121990', 1256591, '3209.35902000', '348780644.23317400', '0'], [1751846400000, '109203.85000000', '109700.00000000', '107513.20000000', '108262.94000000', '9405.37601000', 1751932799999, '1020848316.05370420', 1961940, '3920.92229000', '425664101.80223870', '0'], [1751932800000, '108262.94000000', '109216.56000000', '107429.57000000', '108922.98000000', '9216.02080000', 1752019199999, '1000112813.43989430', 1723244, '4371.98866000', '474674358.99748990', '0'], [1752019200000, '108922.99000000', '111999.79000000', '108324.53000000', '111233.99000000', '17282.28650000', 1752105599999, '1902054744.19492400', 2328484, '8935.70327000', '983405508.74821380', '0'], [1752105600000, '111234.00000000', '116868.00000000', '110500.00000000', '116010.00000000', '24883.45066500', 1752191999999, '2826460280.44522334', 3227017, '12900.13546700', '1465777460.94107554', '0'], [1752192000000, '116010.01000000', '118869.98000000', '115222.22000000', '117527.66000000', '25873.52114800', 1752278399999, '3039521803.02724685', 3708194, '12502.93116800', '1468374333.95021235', '0'], [1752278400000, '117527.66000000', '118200.00000000', '116900.05000000', '117420.00000000', '8446.60437000', 1752364799999, '993093353.40689040', 1441851, '3784.55219000', '444996040.90597870', '0'], [1752364800000, '117420.00000000', '119488.00000000', '117224.79000000', '119086.64000000', '9550.79294700', 1752451199999, '1132096857.01169159', 1650283, '4766.47430700', '565024389.37239190', '0'], [1752451200000, '119086.65000000', '123218.00000000', '118905.18000000', '119841.18000000', '27269.34887700', 1752537599999, '3299746181.07707340', 4076133, '14099.58074700', '1705505292.66472420', '0'], [1752537600000, '119841.17000000', '119940.83000000', '115736.92000000', '117758.09000000', '32018.46083000', 1752623999999, '3755258445.55327170', 3805374, '15667.30508000', '1837578524.92386480', '0'], [1752624000000, '117758.08000000', '120063.84000000', '117017.29000000', '118630.43000000', '17039.90851000', 1752710399999, '2023850383.72348730', 2429625, '8355.96881000', '992430971.36759030', '0'], [1752710400000, '118630.44000000', '120998.71000000', '117453.57000000', '119177.56000000', '15728.57651000', 1752796799999, '1869114355.12316430', 2347985, '7696.17927000', '914659207.57442780', '0'], [1752796800000, '119177.56000000', '120820.71000000', 
            '116812.76000000', '117924.84000000', '19924.66266000', 1752883199999, '2367355518.47030790', 2805236, '8951.37863000', '1063782057.47856260', '0'], [1752883200000, '117924.84000000', '118499.90000000', '117277.34000000', '117840.00000000', '6635.80306000', 1752969599999, '783327898.49696960', 1133382, '2978.38320000', '351626384.05029030', '0'], [1752969600000, '117840.01000000', '118856.80000000', '116467.02000000', '117265.12000000', '12962.92889000', 1753055999999, '1528864683.81608200', 1615935, '6581.33371000', '776457462.98182540', '0'], [1753056000000, '117265.11000000', '119676.73000000', '116515.00000000', '117380.36000000', '17107.33128000', 1753142399999, '2020783266.96336490', 2509543, '8426.31812000', '995117241.66790940', '0'], [1753142400000, '117380.36000000', '120247.80000000', '116128.00000000', '119954.42000000', '20959.12973000', 1753228799999, '2481252763.65191060', 2778733, 
            '10811.45507000', '1280627214.62852240', '0'], [1753228800000, '119954.43000000', '120090.00000000', '117301.00000000', '118755.99000000', '14558.75083000', 1753315199999, '1722126986.88666100', 2101404, '7070.08701000', '836266328.74468310', '0'], [1753315200000, '118756.00000000', '119450.00000000', '117103.10000000', '118340.99000000', '15806.89043000', 1753401599999, '1873181653.20180740', 2081435, '7651.73992000', '906619084.60359310', '0'], [1753401600000, '118340.98000000', '118451.57000000', '114723.16000000', '117614.31000000', '38406.34873000', 1753487999999, '4456778786.62049410', 3282355, '17042.77355000', '1977873720.89647240', '0'], [1753488000000, '117614.31000000', '118297.35000000', '117138.38000000', '117919.99000000', '6991.67206000', 1753574399999, '823629079.74931030', 790372, '3167.88355000', '373290310.21643520', '0'], [1753574400000, '117919.99000000', '119766.65000000', '117825.50000000', '119415.55000000', '9328.30919000', 1753660799999, '1107883542.16079820', 1095080, '5238.30358000', '622261561.25072770', '0'], [1753660800000, '119415.56000000', '119800.00000000', '117427.50000000', '118062.32000000', '13961.74754000', 1753747199999, '1655882235.89651800', 1824777, '7224.91774000', '857128354.22340880', '0'], [1753747200000, '118062.32000000', '119273.36000000', '116950.75000000', '117950.76000000', '15137.93445000', 1753833599999, '1788682083.68564630', 1956694, '7988.93736000', '944162800.07458740', '0'], [1753833600000, '117950.75000000', '118792.00000000', '115796.23000000', '117840.30000000', '15586.73631000', 1753919999999, '1832696878.22298590', 1997369, '7803.61434000', '917632890.23365260', '0'], [1753920000000, '117840.29000000', '118922.45000000', '115500.00000000', '115764.08000000', '17010.00730000', 1754006399999, '2002870016.70224260', 1859532, '8313.51616000', '979519362.06854240', '0'], [1754006400000, '115764.07000000', '116052.00000000', '112722.58000000', '113297.93000000', '24487.10206000', 1754092799999, '2810268577.15136990', 4160829, '11487.22120000', '1318593418.06125480', '0'], [1754092800000, '113297.92000000', '114063.49000000', '112003.00000000', '112546.35000000', '11507.33428000', 1754179199999, '1301882737.32672200', 2165714, '5060.00835000', '572586383.07173130', '0'], [1754179200000, '112546.35000000', '114799.97000000', '111920.00000000', '114208.80000000', '7397.76046000', 1754265599999, '841090034.15425410', 1419281, '3738.18331000', '425246221.29553040', '0'], [1754265600000, '114208.81000000', '115720.00000000', '114107.60000000', '115055.03000000', '9667.67916000', 1754351999999, '1109938874.06297080', 1954230, '4715.29351000', '541443274.80937470', '0'], [1754352000000, '115055.03000000', '115127.81000000', '112650.00000000', '114129.75000000', '12042.79078000', 1754438399999, '1371861747.14661660', 2581052, '5622.66754000', '640570774.10106840', '0'], [1754438400000, '114129.75000000', '115716.00000000', '113355.13000000', '114992.27000000', '9761.15318000', 1754524799999, '1118028732.85891840', 2026500, '4872.24748000', '558193207.67707200', '0'], [1754524800000, '114992.27000000', '117621.00000000', '114259.00000000', '117472.01000000', '13468.56263000', 1754611199999, '1564454297.83692700', 2314671, '7008.73753000', '814088870.44463200', '0'], [1754611200000, '117472.02000000', '117630.00000000', '115878.71000000', '116674.74000000', '10045.31278000', 1754697599999, '1172199778.72425470', 2095304, '4584.90574000', '534970598.46875020', '0'], [1754697600000, '116674.74000000', '117944.05000000', '116299.13000000', '116462.25000000', '9514.13144000', 1754783999999, '1111837601.70237220', 1390951, '4869.85416000', '569228301.11699460', '0'], [1754784000000, '116462.25000000', '119311.11000000', '116460.63000000', '119294.01000000', 
            '14322.77073000', 1754870399999, '1694198747.87187080', 2317065, '8023.43513000', '949082473.72132200', '0'], [1754870400000, '119294.27000000', '122335.16000000', '118050.11000000', '118686.00000000', '26494.33429000', 1754956799999, '3194611530.54106930', 4021743, '13243.42946000', '1596640461.64307680', '0'], [1754956800000, '118686.00000000', '120324.43000000', '118207.47000000', '120134.08000000', '16720.10893000', 1755043199999, '1992762473.58525770', 2737841, '9265.05962000', '1104367998.19617160', '0'], [1755043200000, '120134.09000000', '123667.79000000', '118920.92000000', '123306.43000000', '23210.07102000', 1755129599999, '2811581348.38745740', 3712817, '11931.26825000', '1446045988.04831460', '0'], [1755129600000, '123306.44000000', '124474.00000000', '117180.00000000', '118295.09000000', '27980.94758600', 1755215999999, '3359128391.10852380', 4350449, '13402.07847600', '1608719584.86973360', '0'], [1755216000000, '118295.09000000', '119216.82000000', '116803.99000000', '117342.05000000', '13623.33874000', 1755302399999, '1607609329.68510110', 2895016, '6141.41708000', '724799635.81724670', '0'], [1755302400000, '117342.04000000', '117898.99000000', '117143.98000000', '117380.66000000', '6393.68117000', 1755388799999, '751719391.77236380', 1179842, '2995.22865000', '352158781.09645510', '0'], [1755388800000, '117380.66000000', '118575.00000000', '117172.21000000', '117405.01000000', '5898.64192000', 1755475199999, '695629197.90380730', 1177563, '2804.73113000', '330799448.09036540', '0'], [1755475200000, '117405.01000000', '117543.75000000', '114640.14000000', '116227.05000000', '17745.93954000', 1755561599999, '2053814085.47177750', 3346280, '7647.70667000', '885108979.48874850', '0'], [1755561600000, '116227.05000000', '116725.69000000', '112732.58000000', '112872.94000000', '18065.47424000', 1755647999999, '2065010895.85846640', 3291182, '8609.41370000', '984093545.59442210', '0'], [1755648000000, '112872.95000000', '114615.38000000', '112380.00000000', '114271.24000000', '15636.34194000', 1755734399999, '1776149566.12477360', 2998370, '7209.58575000', '819330970.21586190', '0'], [1755734400000, '114271.23000000', '114821.76000000', '112015.67000000', '112500.00000000', '10839.69235000', 1755820799999, '1227373788.61556290', 2357380, '5346.48007000', '605400341.45449280', '0'], [1755820800000, '112500.00000000', '117429.05000000', '111684.79000000', '116935.99000000', '23128.09037000', 1755907199999, '2656625122.27778650', 3438518, '11843.59711000', '1359907711.87266930', '0'], [1755907200000, '116936.00000000', '117030.00000000', '114560.00000000', '115438.05000000', '11329.36197000', 1755993599999, '1308825428.01435860', 1559569, '5083.35014000', '587273893.13144330', '0'], [1755993600000, '115438.06000000', '115666.68000000', '110680.00000000', '113493.59000000', '21175.98462000', 1756079999999, '2411284606.18917640', 2573906, '9325.06710000', '1061855201.33431230', '0'], [1756080000000, '113493.59000000', '113667.28000000', '109274.10000000', '110111.98000000', '25182.79379000', 1756166399999, '2805570653.63102300', 4695718, '11387.58170000', '1269662985.34417990', '0'], [1756166400000, '110111.98000000', '112371.00000000', '108666.66000000', '111763.22000000', '18452.43877000', 1756252799999, '2033437347.49993920', 4077474, '9863.43157000', '1087468493.59696390', '0'], [1756252800000, '111763.22000000', '112625.00000000', '110345.42000000', '111262.01000000', '13392.60875000', 1756339199999, '1493774927.19083180', 3111496, '6261.84550000', '698586344.17747960', '0'], [1756339200000, '111262.01000000', '113485.90000000', '110862.42000000', '112566.90000000', '11104.27744000', 1756425599999, '1250788481.94532180', 2066780, '5139.46509000', '578866003.68381480', '0'], [1756425600000, '112566.90000000', '112638.64000000', '107463.90000000', '108377.40000000', '22580.31045000', 1756511999999, '2475492492.57752970', 3606959, '10616.35644000', '1164321513.10445710', '0'], [1756512000000, '108377.40000000', '108926.15000000', '107350.10000000', '108816.33000000', '10708.39159000', 1756598399999, '1160666772.73875230', 1411040, '5797.17783000', '628457794.84340100', '0'], [1756598400000, '108816.33000000', '109480.02000000', '108076.93000000', '108246.35000000', '9489.51596000', 1756684799999, '1031806894.35133180', 1366633, '4573.61058000', '497406888.16918830', '0'], [1756684800000, '108246.36000000', '109912.40000000', '107255.00000000', '109237.42000000', '16053.60219000', 1756771199999, '1742516638.78113520', 2729384, '7532.99101000', '817730948.98443340', '0'], [1756771200000, '109237.43000000', '111771.52000000', '108393.39000000', '111240.01000000', '18510.28756000', 1756857599999, '2042681451.90163840', 2596328, '9088.71727000', '1003032805.53679950', '0'], [1756857600000, '111240.01000000', '112575.27000000', '110528.71000000', '111705.71000000', '11773.72084000', 1756943999999, '1313762617.34366450', 2214249, '5539.29462000', '618293676.50751790', '0'], [1756944000000, '111705.72000000', '112180.00000000', '109329.12000000', '110730.87000000', '12203.13536000', 1757030399999, '1349031325.53208460', 2230255, '6070.78151000', '670681185.82571010', '0'], [1757030400000, '110730.87000000', '113384.62000000', '110206.96000000', '110659.99000000', '21587.40888000', 1757116799999, '2413132200.62332500', 2970419, '10787.81127000', '1206066261.22720100', '0'], [1757116800000, '110660.00000000', '111307.70000000', '109977.00000000', '110187.97000000', '5000.29897000', 1757203199999, '552785936.54346990', 795201, '2308.83297000', '255237426.94601100', '0'], [1757203200000, 
            '110187.98000000', '111600.00000000', '110180.00000000', '111137.34000000', '5681.29944000', 1757289599999, '630447950.15886890', 
            874961, '2570.85199000', '285303923.54046230', '0'], [1757289600000, '111137.35000000', '112924.37000000', '110621.78000000', '112065.23000000', '11582.40211000', 1757375999999, '1295903862.46496030', 1744598, '5531.65969000', '618773275.35763070', '0'], [1757376000000, '112065.23000000', '113293.29000000', '110766.66000000', '111546.39000000', '15379.28248000', 1757462399999, '1721465997.90636600', 2143242, '7597.38038000', '849973176.17756840', '0'], [1757462400000, '111546.38000000', '114313.13000000', '110917.45000000', '113960.00000000', '17517.41823000', 1757548799999, '1978834750.22231150', 2182534, '8274.63998000', '934646697.48233240', '0'], [1757548800000, '113960.00000000', '115488.09000000', '113430.00000000', '115482.69000000', '13676.73119000', 1757635199999, '1562241144.95654100', 2166359, '6744.29993000', '770595422.69052130', '0'], [1757635200000, '115482.69000000', '116665.63000000', '114740.99000000', '116029.42000000', '15324.10719000', 1757721599999, '1772122269.50186350', 2481491, '7995.57276000', '924775389.85693960', '0'], [1757721600000, '116029.41000000', '116298.78000000', '115127.27000000', '115918.29000000', '8269.40394000', 1757807999999, '957724220.64976110', 1223635, '3590.09359000', '415773029.43935270', '0'], [1757808000000, '115918.29000000', '116165.19000000', '115135.00000000', '115268.01000000', '6707.60197000', 1757894399999, '775762364.96859910', 1237218, '3406.90777000', '393977059.30354210', '0'], [1757894400000, '115268.01000000', '116757.99000000', '114384.00000000', '115349.71000000', '13212.51149000', 1757980799999, '1522648235.22351530', 2857989, '6621.36360000', '763138585.68502490', '0'], [1757980800000, '115349.71000000', '116964.27000000', '114737.11000000', '116788.96000000', '10926.90940000', 1758067199999, '1265779287.51692670', 2047058, '5292.18365000', '613182568.99191850', '0'], [1758067200000, '116788.96000000', '117286.73000000', '114720.81000000', '116447.59000000', '16754.24540000', 1758153599999, '1946083704.62174570', 3227418, '7975.00190000', '926282110.83307900', '0'], [1758153600000, '116447.60000000', '117900.00000000', '116092.76000000', '117073.53000000', '11657.23365000', 1758239999999, '1367513347.48650940', 2252654, '5717.34538000', '670700552.93472770', '0'], [1758240000000, '117073.53000000', '117459.99000000', '115100.00000000', '115632.38000000', '8992.09065000', 1758326399999, '1045792401.45323890', 1732471, '4020.81483000', '467345983.07867990', '0'], [1758326400000, '115632.39000000', '116121.81000000', '115408.47000000', '115685.63000000', '4674.92752000', 1758412799999, '541264273.24168940', 740451, '2276.16483000', '263511469.84325880', '0'], [1758412800000, '115685.63000000', '115819.06000000', '115188.00000000', '115232.29000000', '4511.52219000', 1758499199999, '521299751.15040960', 945965, '2016.72489000', '233031538.74699310', '0'], [1758499200000, '115232.29000000', '115379.25000000', '111800.00000000', '112650.99000000', '20781.71356000', 1758585599999, '2348872511.69887510', 3045876, '9312.35777000', '1052684266.89818760', '0'], [1758585600000, '112650.99000000', '113290.50000000', '111458.73000000', '111998.80000000', '12301.32030000', 1758671999999, '1383869800.27370310', 2455729, '5543.36090000', '623665658.72003280', '0'], [1758672000000, '111998.80000000', '113940.00000000', '111042.66000000', '113307.00000000', '12369.25967000', 1758758399999, '1394470628.50258200', 2229837, '6100.69487000', '687826281.22047700', '0'], [1758758400000, '113307.01000000', '113510.23000000', '108631.51000000', '108994.49000000', '21231.14957000', 1758844799999, '2356639689.92521460', 4409953, '9511.07937000', '1055527535.76844470', '0'], [1758844800000, '108994.49000000', '110300.00000000', '108620.07000000', '109643.46000000', '14243.01591000', 1758931199999, '1557098915.93925960', 3257155, '6978.29033000', '762955442.75240000', '0'], [1758931200000, '109643.46000000', '109743.91000000', '109064.40000000', '109635.85000000', '5501.78643000', 1759017599999, '601947588.99707650', 919594, '2523.25886000', '276080500.99419540', '0'], [1759017600000, '109635.85000000', '112350.00000000', '109189.99000000', '112163.95000000', '7542.33160000', 1759103999999, '832254944.32033530', 1484866, '3781.87606000', '417495757.16935000', '0'], [1759104000000, '112163.96000000', '114400.00000000', '111560.65000000', '114311.96000000', '15541.12005000', 1759190399999, '1755247635.87113600', 2442653, '7836.68768000', '884934987.56875300', '0'], [1759190400000, '114311.97000000', '114792.00000000', '112656.27000000', '114048.93000000', '15044.15633000', 1759276799999, '1710713267.13009550', 3018331, '7185.72154000', '817044461.27018150', '0'], [1759276800000, '114048.94000000', '118649.10000000', '113966.67000000', '118594.99000000', '20036.39516000', 1759363199999, 
            '2332096981.26593350', 3430343, '10071.04092000', '1172422657.40651740', '0'], [1759363200000, '118594.99000000', '121022.07000000', '118279.31000000', '120529.35000000', '19670.83503000', 1759449599999, '2349861127.34458050', 3472073, '9753.07848000', '1164986423.98980750', '0'], [1759449600000, '120529.35000000', '123894.99000000', '119248.30000000', '122232.00000000', '23936.32800000', 1759535999999, '2907381076.68131880', 4246820, '11288.62355000', '1372792607.61362140', '0'], [1759536000000, '122232.21000000', '122800.00000000', '121510.00000000', '122391.00000000', '8208.16678000', 1759622399999, '1002272903.34464720', 1703590, '3767.80335000', '460154433.12366190', '0'], [1759622400000, '122390.99000000', '125708.42000000', '122136.00000000', '123482.31000000', '22043.09755300', 1759708799999, '2730817470.93956400', 3690670, '11780.67240300', '1459478400.91099630', '0'], [1759708800000, '123482.32000000', '126199.63000000', '123084.00000000', '124658.54000000', '19494.62879300', 1759795199999, '2428828952.26531830', 4206167, '9963.00815300', '1241625129.71771830', '0'], [1759795200000, '124658.54000000', '125126.00000000', '120574.94000000', '121332.95000000', '21633.99385000', 1759881599999, '2657405799.87054860', 4390785, '9699.35099000', '1191947741.69890580', '0'], [1759881600000, '121332.96000000', '124197.25000000', '121066.14000000', '123306.00000000', '17012.61800000', 1759967999999, '2084842842.44161690', 4184997, '9039.06222000', '1107976264.69485960', '0'], [1759968000000, '123306.01000000', '123762.94000000', '119651.47000000', '121662.40000000', '21559.36007000', 1760054399999, '2621438087.56673310', 4231167, '10144.15364000', '1233882833.56423890', '0'], [1760054400000, '121662.41000000', '122550.00000000', '102000.00000000', '112774.50000000', '64171.93927000', 1760140799999, '7349750905.04115730', 11404522, '30502.14297000', '3493298452.84600770', '0'], [1760140800000, '112774.49000000', '113322.39000000', '109561.59000000', '110644.40000000', '35448.51652000', 1760227199999, '3961069473.23113630', 6661929, '15375.94796000', '1718429599.56695220', '0'], [1760227200000, '110644.40000000', '115770.00000000', '109565.06000000', '114958.80000000', '32255.30272000', 1760313599999, '3638546528.74015580', 6048575, '16915.44533000', '1907676479.17725090', '0'], [1760313600000, '114958.81000000', '115963.81000000', '113616.50000000', '115166.00000000', '22557.24033000', 1760399999999, '2591831660.98574920', 5739352, '10710.89723000', '1230950583.84246650', '0'], [1760400000000, '115166.00000000', '115409.96000000', '109866.00000000', '113028.14000000', '31870.32974000', 1760486399999, '3578140778.80849870', 7425642, '14944.19197000', '1677011392.63438070', '0'], [1760486400000, '113028.13000000', '113612.35000000', '110164.00000000', '110763.28000000', '22986.48811000', 1760572799999, '2569639641.35276860', 5243141, '10499.31831000', '1173678794.92077390', '0'], [1760572800000, '110763.28000000', '111982.45000000', '107427.00000000', '108194.28000000', '29857.17252000', 1760659199999, '3277596494.76191940', 6127094, '13126.95119000', '1441416875.12637710', '0'], [1760659200000, '108194.27000000', '109240.00000000', '103528.23000000', '106431.68000000', '37920.66838000', 1760745599999, '4022645635.22120190', 7570685, '17996.99946000', '1909654487.45622080', '0'], [1760745600000, '106431.68000000', '107499.00000000', '106322.20000000', '107185.01000000', '11123.18766000', 1760831999999, '1189002999.14311300', 2105450, '4845.85641000', '518065716.66181290', '0'], [1760832000000, '107185.00000000', '109450.07000000', '106103.36000000', '108642.78000000', '15480.66423000', 1760918399999, '1670074079.58023430', 3205640, '7100.31013000', '766423535.81773780', '0'], [1760918400000, '108642.77000000', '111705.56000000', '107402.52000000', '110532.09000000', '19193.44160000', 1761004799999, '2119912185.59346830', 4283542, '9280.50075000', '1024925788.72169910', '0'], [1761004800000, '110532.09000000', '114000.00000000', '107473.72000000', '108297.67000000', '37228.01659000', 1761091199999, '4114477849.93205410', 6004063, '17034.07155000', '1881327751.33461280', '0'], [1761091200000, '108297.66000000', '109163.88000000', '106666.69000000', '107567.44000000', '28610.78451000', 1761177599999, '3090291706.44398170', 5547903, '13766.58861000', '1487179903.59997880', '0'], [1761177600000, '107567.45000000', '111293.61000000', '107500.00000000', '110078.18000000', '17573.09294000', 1761263999999, '1924582289.41139380', 3721614, '8575.33716000', '938905317.70341070', '0'], [1761264000000, '110078.19000000', '112104.98000000', '109700.01000000', '111004.89000000', '15005.16913000', 1761350399999, '1662806764.95333240', 3241022, '7511.24340000', '832390454.80762260', '0'], [1761350400000, '111004.90000000', '111943.19000000', 
            '110672.86000000', '111646.27000000', '6407.96864000', 1761436799999, '714201332.97512240', 1238199, '3087.08660000', '344113931.79994520', '0'], [1761436800000, '111646.27000000', '115466.80000000', '111260.45000000', '114559.40000000', '13454.47737000', 1761523199999, '1525108635.87482900', 2463951, '6982.18154000', '791462349.35160560', '0'], [1761523200000, '114559.41000000', '116400.00000000', '113830.01000000', '114107.65000000', '21450.23241000', 1761609599999, '2470872744.54896810', 3660488, '10969.70182000', '1263753536.99738980', '0'], [1761609600000, '114107.65000000', '116086.00000000', '112211.00000000', '112898.45000000', '15523.42257000', 1761695999999, '1772753529.86427430', 3829845, '7765.31574000', '887031686.01637250', '0'], [1761696000000, '112898.44000000', '113643.73000000', '109200.00000000', '110021.29000000', '21079.71376000', 1761782399999, '2356715986.53354560', 4481480, '10407.07233000', '1163985607.35690850', '0'], [1761782400000, '110021.30000000', '111592.00000000', '106304.34000000', '108322.88000000', '25988.82838000', 1761868799999, '2827221287.42279770', 6373451, '12551.13144000', '1365671836.74559240', '0'], [1761868800000, '108322.87000000', '111190.00000000', '108275.28000000', '109608.01000000', '21518.20439000', 1761955199999, '2361590437.94141060', 5256872, '10798.53938000', '1185034290.92377970', '0'], [1761955200000, '109608.01000000', '110564.49000000', '109394.81000000', '110098.10000000', '7378.50431000', 1762041599999, '812389216.43467980', 1994214, '3406.68401000', '375126956.08097220', 
            '0'], [1762041600000, '110098.10000000', '111250.01000000', '109471.34000000', '110540.68000000', '12107.00087000', 1762127999999, '1336870531.14150130', 2652188, '5921.86453000', '654016950.25497770', '0'], [1762128000000, '110540.69000000', '110750.00000000', '105306.56000000', '106583.04000000', '28681.18779000', 1762214399999, '3076006652.00156760', 7074546, '12847.08574000', '1377869106.66817760', '0'], [1762214400000, '106583.05000000', '107299.00000000', '98944.36000000', '101497.22000000', '50534.87376000', 1762300799999, '5197697635.21241310', 9099609, '23388.99033000', '2406186713.17052980', '0'], [1762300800000, '101497.23000000', 
            '104534.74000000', '98966.80000000', '103885.16000000', '33778.77571000', 1762387199999, '3454273922.70038500', 6500368, '18126.84828000', '1854232277.03301110', '0'], [1762387200000, '103885.16000000', '104200.00000000', '100300.95000000', '101346.04000000', 
            '25814.62139000', 1762473599999, '2641767846.30582700', 5755001, '11972.54796000', '1225474173.02042840', '0'], [1762473600000, '101346.04000000', '104096.36000000', '99260.86000000', '103339.08000000', '32059.50942000', 1762559999999, '3251112979.30588400', 6335759, '16056.80582000', '1629564159.11657990', '0'], [1762560000000, '103339.09000000', '103406.22000000', '101454.00000000', '102312.94000000', '12390.77985000', 1762646399999, '1267165565.37527010', 2743819, '5862.65977000', '599611355.36714670', '0'], [1762646400000, '102312.95000000', '102337.89000000', '101620.23000000', '101894.46000000', '540.10193000', 1762732799999, '55083833.32232490', 123819, '187.90766000', '19159001.07147570', '0']]
        
        # Same as TradingView at the time this data was captured.
        self.assertEqual(self.chart.get_macd(fast = 12, slow = 26, signal = 9), {'macd': np.float64(-2826.343130849913), 'signal': np.float64(-656.9180954584385), 'histogram': np.float64(-2169.4250353914745)})

    def test_bollinger_bands(self):
        self.chart._binance_api.get_candles.side_effect = None
        self.chart._binance_api.get_candles.return_value = [[1760918400000, '108642.77000000', '111705.56000000', '107402.52000000', '110532.09000000', '19193.44160000', 1761004799999, '2119912185.59346830', 4283542, '9280.50075000', '1024925788.72169910', '0'], [1761004800000, '110532.09000000', '114000.00000000', '107473.72000000', '108297.67000000', '37228.01659000', 1761091199999, '4114477849.93205410', 6004063, '17034.07155000', '1881327751.33461280', '0'], [1761091200000, '108297.66000000', '109163.88000000', '106666.69000000', '107567.44000000', '28610.78451000', 1761177599999, '3090291706.44398170', 5547903, '13766.58861000', '1487179903.59997880', '0'], [1761177600000, '107567.45000000', '111293.61000000', '107500.00000000', '110078.18000000', '17573.09294000', 1761263999999, '1924582289.41139380', 3721614, '8575.33716000', '938905317.70341070', '0'], [1761264000000, '110078.19000000', '112104.98000000', '109700.01000000', '111004.89000000', '15005.16913000', 1761350399999, '1662806764.95333240', 3241022, '7511.24340000', '832390454.80762260', '0'], [1761350400000, '111004.90000000', '111943.19000000', '110672.86000000', '111646.27000000', '6407.96864000', 1761436799999, '714201332.97512240', 1238199, '3087.08660000', '344113931.79994520', '0'], [1761436800000, '111646.27000000', '115466.80000000', '111260.45000000', '114559.40000000', '13454.47737000', 1761523199999, '1525108635.87482900', 2463951, '6982.18154000', '791462349.35160560', '0'], [1761523200000, '114559.41000000', '116400.00000000', '113830.01000000', '114107.65000000', '21450.23241000', 1761609599999, '2470872744.54896810', 3660488, '10969.70182000', '1263753536.99738980', '0'], [1761609600000, '114107.65000000', '116086.00000000', '112211.00000000', '112898.45000000', '15523.42257000', 1761695999999, '1772753529.86427430', 3829845, '7765.31574000', '887031686.01637250', '0'], [1761696000000, '112898.44000000', '113643.73000000', '109200.00000000', '110021.29000000', '21079.71376000', 1761782399999, '2356715986.53354560', 4481480, '10407.07233000', '1163985607.35690850', '0'], [1761782400000, '110021.30000000', '111592.00000000', '106304.34000000', '108322.88000000', '25988.82838000', 1761868799999, '2827221287.42279770', 6373451, '12551.13144000', '1365671836.74559240', '0'], [1761868800000, '108322.87000000', '111190.00000000', '108275.28000000', '109608.01000000', '21518.20439000', 1761955199999, '2361590437.94141060', 5256872, '10798.53938000', '1185034290.92377970', '0'], [1761955200000, '109608.01000000', '110564.49000000', '109394.81000000', '110098.10000000', '7378.50431000', 1762041599999, '812389216.43467980', 1994214, '3406.68401000', '375126956.08097220', '0'], [1762041600000, '110098.10000000', '111250.01000000', '109471.34000000', '110540.68000000', '12107.00087000', 1762127999999, '1336870531.14150130', 2652188, '5921.86453000', '654016950.25497770', '0'], [1762128000000, '110540.69000000', '110750.00000000', '105306.56000000', '106583.04000000', '28681.18779000', 1762214399999, '3076006652.00156760', 7074546, '12847.08574000', '1377869106.66817760', '0'], [1762214400000, '106583.05000000', '107299.00000000', '98944.36000000', '101497.22000000', '50534.87376000', 1762300799999, '5197697635.21241310', 9099609, '23388.99033000', '2406186713.17052980', '0'], [1762300800000, '101497.23000000', '104534.74000000', '98966.80000000', '103885.16000000', '33778.77571000', 1762387199999, '3454273922.70038500', 6500368, '18126.84828000', '1854232277.03301110', '0'], [1762387200000, '103885.16000000', '104200.00000000', '100300.95000000', '101346.04000000', '25814.62139000', 1762473599999, '2641767846.30582700', 5755001, '11972.54796000', '1225474173.02042840', '0'], [1762473600000, '101346.04000000', '104096.36000000', '99260.86000000', '103339.08000000', '32059.50942000', 1762559999999, '3251112979.30588400', 6335759, '16056.80582000', '1629564159.11657990', '0'], [1762560000000, '103339.09000000', '103406.22000000', '101454.00000000', '102312.94000000', '12390.77985000', 1762646399999, '1267165565.37527010', 2743819, '5862.65977000', '599611355.36714670', '0'], [1762646400000, '102312.95000000', '102337.89000000', '101620.23000000', '101838.00000000', '635.02167000', 1762732799999, '64746284.29755520', 152633, '214.75345000', '21892021.08188380', '0']]

        # Same as TradingView at the time this data was captured.
        self.assertEqual(self.chart.get_bollinger_bands(period = 20, multiplier = 2.0), {'upper': np.float64(116517.35736640086), 'middle': np.float64(107977.61949999999), 'lower': np.float64(99437.88163359911)})

    def test_get_trend_metrics(self):
        self.chart._binance_api.get_candles.side_effect = None
        self.chart._binance_api.get_candles.return_value = [[1752796800000, '119177.56000000', '120820.71000000', '116812.76000000', '117924.84000000', '19924.66266000', 1752883199999, '2367355518.47030790', 2805236, '8951.37863000', '1063782057.47856260', '0'], [1752883200000, '117924.84000000', '118499.90000000', '117277.34000000', '117840.00000000', '6635.80306000', 1752969599999, '783327898.49696960', 1133382, '2978.38320000', '351626384.05029030', '0'], [1752969600000, '117840.01000000', '118856.80000000', '116467.02000000', '117265.12000000', '12962.92889000', 1753055999999, '1528864683.81608200', 1615935, '6581.33371000', '776457462.98182540', 
            '0'], [1753056000000, '117265.11000000', '119676.73000000', '116515.00000000', '117380.36000000', '17107.33128000', 1753142399999, '2020783266.96336490', 2509543, '8426.31812000', '995117241.66790940', '0'], [1753142400000, '117380.36000000', '120247.80000000', '116128.00000000', '119954.42000000', '20959.12973000', 1753228799999, '2481252763.65191060', 2778733, '10811.45507000', '1280627214.62852240', '0'], [1753228800000, '119954.43000000', '120090.00000000', '117301.00000000', '118755.99000000', '14558.75083000', 1753315199999, '1722126986.88666100', 2101404, '7070.08701000', '836266328.74468310', '0'], [1753315200000, '118756.00000000', '119450.00000000', '117103.10000000', '118340.99000000', '15806.89043000', 1753401599999, '1873181653.20180740', 2081435, '7651.73992000', '906619084.60359310', '0'], [1753401600000, '118340.98000000', '118451.57000000', '114723.16000000', '117614.31000000', '38406.34873000', 1753487999999, '4456778786.62049410', 3282355, '17042.77355000', '1977873720.89647240', '0'], [1753488000000, '117614.31000000', '118297.35000000', '117138.38000000', '117919.99000000', '6991.67206000', 1753574399999, '823629079.74931030', 790372, '3167.88355000', '373290310.21643520', '0'], [1753574400000, '117919.99000000', '119766.65000000', '117825.50000000', '119415.55000000', '9328.30919000', 1753660799999, '1107883542.16079820', 1095080, '5238.30358000', '622261561.25072770', '0'], [1753660800000, '119415.56000000', '119800.00000000', '117427.50000000', '118062.32000000', '13961.74754000', 1753747199999, '1655882235.89651800', 1824777, '7224.91774000', '857128354.22340880', '0'], [1753747200000, '118062.32000000', '119273.36000000', '116950.75000000', '117950.76000000', '15137.93445000', 1753833599999, '1788682083.68564630', 1956694, '7988.93736000', '944162800.07458740', '0'], [1753833600000, '117950.75000000', '118792.00000000', '115796.23000000', '117840.30000000', '15586.73631000', 1753919999999, '1832696878.22298590', 1997369, '7803.61434000', '917632890.23365260', '0'], [1753920000000, '117840.29000000', '118922.45000000', '115500.00000000', '115764.08000000', '17010.00730000', 1754006399999, '2002870016.70224260', 1859532, '8313.51616000', '979519362.06854240', '0'], [1754006400000, '115764.07000000', '116052.00000000', '112722.58000000', '113297.93000000', '24487.10206000', 1754092799999, '2810268577.15136990', 4160829, '11487.22120000', '1318593418.06125480', '0'], [1754092800000, '113297.92000000', '114063.49000000', '112003.00000000', '112546.35000000', '11507.33428000', 1754179199999, '1301882737.32672200', 2165714, '5060.00835000', '572586383.07173130', '0'], [1754179200000, '112546.35000000', '114799.97000000', '111920.00000000', '114208.80000000', '7397.76046000', 1754265599999, '841090034.15425410', 1419281, '3738.18331000', '425246221.29553040', '0'], [1754265600000, '114208.81000000', '115720.00000000', '114107.60000000', '115055.03000000', '9667.67916000', 1754351999999, '1109938874.06297080', 1954230, '4715.29351000', '541443274.80937470', '0'], [1754352000000, '115055.03000000', '115127.81000000', '112650.00000000', '114129.75000000', '12042.79078000', 1754438399999, '1371861747.14661660', 2581052, '5622.66754000', '640570774.10106840', '0'], [1754438400000, '114129.75000000', '115716.00000000', '113355.13000000', '114992.27000000', '9761.15318000', 1754524799999, '1118028732.85891840', 2026500, '4872.24748000', '558193207.67707200', '0'], [1754524800000, '114992.27000000', '117621.00000000', '114259.00000000', '117472.01000000', '13468.56263000', 1754611199999, '1564454297.83692700', 2314671, '7008.73753000', '814088870.44463200', '0'], [1754611200000, '117472.02000000', '117630.00000000', '115878.71000000', '116674.74000000', '10045.31278000', 1754697599999, '1172199778.72425470', 2095304, '4584.90574000', '534970598.46875020', '0'], [1754697600000, '116674.74000000', '117944.05000000', '116299.13000000', '116462.25000000', '9514.13144000', 1754783999999, '1111837601.70237220', 1390951, '4869.85416000', '569228301.11699460', '0'], [1754784000000, '116462.25000000', '119311.11000000', '116460.63000000', '119294.01000000', '14322.77073000', 1754870399999, '1694198747.87187080', 2317065, 
            '8023.43513000', '949082473.72132200', '0'], [1754870400000, '119294.27000000', '122335.16000000', '118050.11000000', '118686.00000000', '26494.33429000', 1754956799999, '3194611530.54106930', 4021743, '13243.42946000', '1596640461.64307680', '0'], [1754956800000, '118686.00000000', '120324.43000000', '118207.47000000', '120134.08000000', '16720.10893000', 1755043199999, '1992762473.58525770', 2737841, '9265.05962000', '1104367998.19617160', '0'], [1755043200000, '120134.09000000', '123667.79000000', '118920.92000000', '123306.43000000', '23210.07102000', 1755129599999, '2811581348.38745740', 
            3712817, '11931.26825000', '1446045988.04831460', '0'], [1755129600000, '123306.44000000', '124474.00000000', '117180.00000000', '118295.09000000', '27980.94758600', 1755215999999, '3359128391.10852380', 4350449, '13402.07847600', '1608719584.86973360', '0'], [1755216000000, '118295.09000000', '119216.82000000', '116803.99000000', '117342.05000000', '13623.33874000', 1755302399999, '1607609329.68510110', 2895016, '6141.41708000', '724799635.81724670', '0'], [1755302400000, '117342.04000000', '117898.99000000', '117143.98000000', '117380.66000000', '6393.68117000', 1755388799999, '751719391.77236380', 1179842, '2995.22865000', '352158781.09645510', '0'], [1755388800000, '117380.66000000', '118575.00000000', '117172.21000000', '117405.01000000', '5898.64192000', 1755475199999, '695629197.90380730', 1177563, '2804.73113000', '330799448.09036540', '0'], [1755475200000, '117405.01000000', '117543.75000000', '114640.14000000', '116227.05000000', '17745.93954000', 1755561599999, '2053814085.47177750', 3346280, '7647.70667000', '885108979.48874850', '0'], [1755561600000, 
            '116227.05000000', '116725.69000000', '112732.58000000', '112872.94000000', '18065.47424000', 1755647999999, '2065010895.85846640', 3291182, '8609.41370000', '984093545.59442210', '0'], [1755648000000, '112872.95000000', '114615.38000000', 
            '112380.00000000', '114271.24000000', '15636.34194000', 1755734399999, '1776149566.12477360', 2998370, '7209.58575000', 
            '819330970.21586190', '0'], [1755734400000, '114271.23000000', '114821.76000000', '112015.67000000', '112500.00000000', 
            '10839.69235000', 1755820799999, '1227373788.61556290', 2357380, '5346.48007000', '605400341.45449280', '0'], [1755820800000, '112500.00000000', '117429.05000000', '111684.79000000', '116935.99000000', '23128.09037000', 1755907199999, '2656625122.27778650', 3438518, '11843.59711000', '1359907711.87266930', '0'], [1755907200000, '116936.00000000', '117030.00000000', '114560.00000000', '115438.05000000', '11329.36197000', 1755993599999, '1308825428.01435860', 1559569, '5083.35014000', '587273893.13144330', '0'], [1755993600000, '115438.06000000', '115666.68000000', '110680.00000000', '113493.59000000', '21175.98462000', 1756079999999, '2411284606.18917640', 2573906, '9325.06710000', '1061855201.33431230', '0'], [1756080000000, '113493.59000000', '113667.28000000', '109274.10000000', '110111.98000000', '25182.79379000', 1756166399999, '2805570653.63102300', 4695718, '11387.58170000', '1269662985.34417990', '0'], [1756166400000, '110111.98000000', '112371.00000000', '108666.66000000', '111763.22000000', '18452.43877000', 1756252799999, '2033437347.49993920', 4077474, 
            '9863.43157000', '1087468493.59696390', '0'], [1756252800000, '111763.22000000', '112625.00000000', '110345.42000000', '111262.01000000', '13392.60875000', 1756339199999, '1493774927.19083180', 3111496, '6261.84550000', '698586344.17747960', '0'], [1756339200000, '111262.01000000', '113485.90000000', '110862.42000000', '112566.90000000', '11104.27744000', 1756425599999, '1250788481.94532180', 2066780, '5139.46509000', '578866003.68381480', '0'], [1756425600000, '112566.90000000', '112638.64000000', '107463.90000000', '108377.40000000', '22580.31045000', 1756511999999, '2475492492.57752970', 3606959, '10616.35644000', '1164321513.10445710', '0'], [1756512000000, '108377.40000000', '108926.15000000', '107350.10000000', '108816.33000000', '10708.39159000', 1756598399999, '1160666772.73875230', 1411040, '5797.17783000', '628457794.84340100', '0'], [1756598400000, '108816.33000000', '109480.02000000', '108076.93000000', '108246.35000000', '9489.51596000', 1756684799999, '1031806894.35133180', 1366633, '4573.61058000', '497406888.16918830', '0'], [1756684800000, '108246.36000000', '109912.40000000', '107255.00000000', '109237.42000000', '16053.60219000', 1756771199999, '1742516638.78113520', 2729384, '7532.99101000', '817730948.98443340', '0'], [1756771200000, '109237.43000000', '111771.52000000', '108393.39000000', '111240.01000000', '18510.28756000', 1756857599999, '2042681451.90163840', 2596328, '9088.71727000', '1003032805.53679950', '0'], [1756857600000, '111240.01000000', '112575.27000000', '110528.71000000', '111705.71000000', '11773.72084000', 1756943999999, '1313762617.34366450', 2214249, '5539.29462000', '618293676.50751790', '0'], [1756944000000, 
            '111705.72000000', '112180.00000000', '109329.12000000', '110730.87000000', '12203.13536000', 1757030399999, '1349031325.53208460', 2230255, '6070.78151000', '670681185.82571010', '0'], [1757030400000, '110730.87000000', '113384.62000000', 
            '110206.96000000', '110659.99000000', '21587.40888000', 1757116799999, '2413132200.62332500', 2970419, '10787.81127000', '1206066261.22720100', '0'], [1757116800000, '110660.00000000', '111307.70000000', '109977.00000000', '110187.97000000', '5000.29897000', 1757203199999, '552785936.54346990', 795201, '2308.83297000', '255237426.94601100', '0'], [1757203200000, '110187.98000000', '111600.00000000', '110180.00000000', '111137.34000000', '5681.29944000', 1757289599999, '630447950.15886890', 874961, '2570.85199000', '285303923.54046230', '0'], [1757289600000, '111137.35000000', '112924.37000000', '110621.78000000', '112065.23000000', '11582.40211000', 1757375999999, '1295903862.46496030', 1744598, '5531.65969000', '618773275.35763070', '0'], [1757376000000, '112065.23000000', '113293.29000000', '110766.66000000', '111546.39000000', '15379.28248000', 1757462399999, '1721465997.90636600', 2143242, '7597.38038000', '849973176.17756840', '0'], [1757462400000, '111546.38000000', '114313.13000000', '110917.45000000', '113960.00000000', '17517.41823000', 1757548799999, '1978834750.22231150', 2182534, '8274.63998000', '934646697.48233240', '0'], [1757548800000, '113960.00000000', '115488.09000000', '113430.00000000', '115482.69000000', '13676.73119000', 1757635199999, '1562241144.95654100', 2166359, '6744.29993000', '770595422.69052130', '0'], [1757635200000, '115482.69000000', '116665.63000000', '114740.99000000', '116029.42000000', '15324.10719000', 1757721599999, '1772122269.50186350', 2481491, '7995.57276000', '924775389.85693960', '0'], [1757721600000, '116029.41000000', '116298.78000000', '115127.27000000', '115918.29000000', '8269.40394000', 1757807999999, '957724220.64976110', 1223635, '3590.09359000', '415773029.43935270', '0'], [1757808000000, '115918.29000000', '116165.19000000', '115135.00000000', '115268.01000000', '6707.60197000', 1757894399999, '775762364.96859910', 1237218, '3406.90777000', '393977059.30354210', '0'], [1757894400000, '115268.01000000', '116757.99000000', '114384.00000000', '115349.71000000', '13212.51149000', 1757980799999, '1522648235.22351530', 2857989, '6621.36360000', '763138585.68502490', '0'], 
            [1757980800000, '115349.71000000', '116964.27000000', '114737.11000000', '116788.96000000', '10926.90940000', 1758067199999, '1265779287.51692670', 2047058, '5292.18365000', '613182568.99191850', '0'], [1758067200000, '116788.96000000', '117286.73000000', '114720.81000000', '116447.59000000', '16754.24540000', 1758153599999, '1946083704.62174570', 3227418, '7975.00190000', '926282110.83307900', '0'], [1758153600000, '116447.60000000', '117900.00000000', '116092.76000000', '117073.53000000', '11657.23365000', 1758239999999, '1367513347.48650940', 2252654, '5717.34538000', '670700552.93472770', 
            '0'], [1758240000000, '117073.53000000', '117459.99000000', '115100.00000000', '115632.38000000', '8992.09065000', 1758326399999, '1045792401.45323890', 1732471, '4020.81483000', '467345983.07867990', '0'], [1758326400000, '115632.39000000', '116121.81000000', '115408.47000000', '115685.63000000', '4674.92752000', 1758412799999, '541264273.24168940', 740451, '2276.16483000', '263511469.84325880', '0'], [1758412800000, '115685.63000000', '115819.06000000', '115188.00000000', '115232.29000000', '4511.52219000', 1758499199999, '521299751.15040960', 945965, '2016.72489000', '233031538.74699310', '0'], [1758499200000, '115232.29000000', '115379.25000000', '111800.00000000', '112650.99000000', '20781.71356000', 1758585599999, '2348872511.69887510', 3045876, '9312.35777000', '1052684266.89818760', '0'], [1758585600000, '112650.99000000', '113290.50000000', '111458.73000000', '111998.80000000', '12301.32030000', 1758671999999, '1383869800.27370310', 2455729, '5543.36090000', '623665658.72003280', '0'], [1758672000000, '111998.80000000', '113940.00000000', '111042.66000000', '113307.00000000', '12369.25967000', 1758758399999, '1394470628.50258200', 2229837, '6100.69487000', '687826281.22047700', '0'], [1758758400000, '113307.01000000', '113510.23000000', '108631.51000000', '108994.49000000', '21231.14957000', 1758844799999, '2356639689.92521460', 4409953, '9511.07937000', '1055527535.76844470', '0'], [1758844800000, '108994.49000000', '110300.00000000', '108620.07000000', '109643.46000000', '14243.01591000', 1758931199999, '1557098915.93925960', 3257155, '6978.29033000', '762955442.75240000', '0'], [1758931200000, '109643.46000000', '109743.91000000', '109064.40000000', '109635.85000000', '5501.78643000', 1759017599999, '601947588.99707650', 919594, '2523.25886000', '276080500.99419540', '0'], [1759017600000, '109635.85000000', '112350.00000000', '109189.99000000', '112163.95000000', '7542.33160000', 1759103999999, '832254944.32033530', 1484866, '3781.87606000', '417495757.16935000', '0'], [1759104000000, '112163.96000000', '114400.00000000', '111560.65000000', '114311.96000000', '15541.12005000', 1759190399999, '1755247635.87113600', 2442653, '7836.68768000', '884934987.56875300', '0'], [1759190400000, '114311.97000000', '114792.00000000', '112656.27000000', '114048.93000000', '15044.15633000', 1759276799999, '1710713267.13009550', 3018331, '7185.72154000', '817044461.27018150', '0'], [1759276800000, '114048.94000000', '118649.10000000', '113966.67000000', '118594.99000000', '20036.39516000', 1759363199999, '2332096981.26593350', 3430343, '10071.04092000', '1172422657.40651740', '0'], [1759363200000, 
            '118594.99000000', '121022.07000000', '118279.31000000', '120529.35000000', '19670.83503000', 1759449599999, '2349861127.34458050', 3472073, '9753.07848000', '1164986423.98980750', '0'], [1759449600000, '120529.35000000', '123894.99000000', '119248.30000000', '122232.00000000', '23936.32800000', 1759535999999, '2907381076.68131880', 4246820, '11288.62355000', '1372792607.61362140', '0'], [1759536000000, '122232.21000000', '122800.00000000', '121510.00000000', '122391.00000000', '8208.16678000', 1759622399999, '1002272903.34464720', 1703590, '3767.80335000', '460154433.12366190', '0'], [1759622400000, '122390.99000000', '125708.42000000', '122136.00000000', '123482.31000000', '22043.09755300', 1759708799999, '2730817470.93956400', 3690670, '11780.67240300', '1459478400.91099630', '0'], [1759708800000, '123482.32000000', '126199.63000000', '123084.00000000', '124658.54000000', '19494.62879300', 1759795199999, '2428828952.26531830', 4206167, '9963.00815300', '1241625129.71771830', '0'], [1759795200000, '124658.54000000', '125126.00000000', '120574.94000000', '121332.95000000', '21633.99385000', 1759881599999, '2657405799.87054860', 4390785, '9699.35099000', '1191947741.69890580', '0'], [1759881600000, '121332.96000000', '124197.25000000', '121066.14000000', '123306.00000000', '17012.61800000', 1759967999999, '2084842842.44161690', 4184997, '9039.06222000', '1107976264.69485960', '0'], [1759968000000, '123306.01000000', 
            '123762.94000000', '119651.47000000', '121662.40000000', '21559.36007000', 1760054399999, '2621438087.56673310', 4231167, '10144.15364000', '1233882833.56423890', '0'], [1760054400000, '121662.41000000', '122550.00000000', '102000.00000000', '112774.50000000', '64171.93927000', 1760140799999, '7349750905.04115730', 11404522, '30502.14297000', '3493298452.84600770', '0'], [1760140800000, '112774.49000000', '113322.39000000', '109561.59000000', '110644.40000000', '35448.51652000', 1760227199999, '3961069473.23113630', 6661929, '15375.94796000', '1718429599.56695220', '0'], [1760227200000, '110644.40000000', '115770.00000000', '109565.06000000', '114958.80000000', '32255.30272000', 1760313599999, '3638546528.74015580', 6048575, '16915.44533000', '1907676479.17725090', '0'], [1760313600000, '114958.81000000', '115963.81000000', '113616.50000000', '115166.00000000', '22557.24033000', 1760399999999, '2591831660.98574920', 5739352, '10710.89723000', '1230950583.84246650', '0'], [1760400000000, '115166.00000000', '115409.96000000', '109866.00000000', '113028.14000000', '31870.32974000', 1760486399999, '3578140778.80849870', 7425642, '14944.19197000', '1677011392.63438070', '0'], [1760486400000, '113028.13000000', '113612.35000000', '110164.00000000', '110763.28000000', '22986.48811000', 1760572799999, '2569639641.35276860', 5243141, '10499.31831000', '1173678794.92077390', '0'], [1760572800000, '110763.28000000', '111982.45000000', '107427.00000000', '108194.28000000', '29857.17252000', 1760659199999, '3277596494.76191940', 6127094, '13126.95119000', '1441416875.12637710', '0'], [1760659200000, '108194.27000000', '109240.00000000', '103528.23000000', '106431.68000000', '37920.66838000', 1760745599999, '4022645635.22120190', 7570685, '17996.99946000', '1909654487.45622080', '0'], [1760745600000, '106431.68000000', '107499.00000000', '106322.20000000', '107185.01000000', '11123.18766000', 1760831999999, '1189002999.14311300', 2105450, '4845.85641000', '518065716.66181290', '0'], [1760832000000, '107185.00000000', '109450.07000000', '106103.36000000', '108642.78000000', '15480.66423000', 1760918399999, '1670074079.58023430', 3205640, '7100.31013000', '766423535.81773780', '0'], [1760918400000, '108642.77000000', '111705.56000000', '107402.52000000', '110532.09000000', '19193.44160000', 1761004799999, '2119912185.59346830', 4283542, '9280.50075000', '1024925788.72169910', '0'], [1761004800000, '110532.09000000', '114000.00000000', '107473.72000000', '108297.67000000', '37228.01659000', 1761091199999, '4114477849.93205410', 6004063, '17034.07155000', '1881327751.33461280', '0'], [1761091200000, '108297.66000000', '109163.88000000', '106666.69000000', '107567.44000000', '28610.78451000', 1761177599999, '3090291706.44398170', 5547903, '13766.58861000', '1487179903.59997880', '0'], [1761177600000, '107567.45000000', '111293.61000000', '107500.00000000', '110078.18000000', '17573.09294000', 1761263999999, '1924582289.41139380', 3721614, '8575.33716000', '938905317.70341070', '0'], [1761264000000, '110078.19000000', '112104.98000000', '109700.01000000', '111004.89000000', '15005.16913000', 1761350399999, '1662806764.95333240', 3241022, '7511.24340000', '832390454.80762260', '0'], [1761350400000, '111004.90000000', '111943.19000000', '110672.86000000', '111646.27000000', '6407.96864000', 1761436799999, '714201332.97512240', 1238199, '3087.08660000', '344113931.79994520', '0'], [1761436800000, '111646.27000000', '115466.80000000', '111260.45000000', '114559.40000000', '13454.47737000', 1761523199999, '1525108635.87482900', 2463951, '6982.18154000', '791462349.35160560', '0'], [1761523200000, '114559.41000000', '116400.00000000', '113830.01000000', '114107.65000000', '21450.23241000', 1761609599999, '2470872744.54896810', 3660488, '10969.70182000', '1263753536.99738980', '0'], [1761609600000, '114107.65000000', '116086.00000000', '112211.00000000', '112898.45000000', '15523.42257000', 1761695999999, '1772753529.86427430', 3829845, '7765.31574000', '887031686.01637250', '0'], [1761696000000, '112898.44000000', '113643.73000000', '109200.00000000', '110021.29000000', '21079.71376000', 1761782399999, '2356715986.53354560', 4481480, '10407.07233000', '1163985607.35690850', '0'], [1761782400000, '110021.30000000', '111592.00000000', '106304.34000000', '108322.88000000', '25988.82838000', 1761868799999, '2827221287.42279770', 6373451, '12551.13144000', '1365671836.74559240', '0'], [1761868800000, '108322.87000000', '111190.00000000', '108275.28000000', '109608.01000000', '21518.20439000', 1761955199999, '2361590437.94141060', 5256872, '10798.53938000', '1185034290.92377970', '0'], [1761955200000, '109608.01000000', '110564.49000000', '109394.81000000', '110098.10000000', '7378.50431000', 1762041599999, '812389216.43467980', 1994214, '3406.68401000', '375126956.08097220', '0'], [1762041600000, '110098.10000000', '111250.01000000', '109471.34000000', '110540.68000000', '12107.00087000', 1762127999999, '1336870531.14150130', 2652188, '5921.86453000', '654016950.25497770', '0'], [1762128000000, '110540.69000000', '110750.00000000', '105306.56000000', '106583.04000000', '28681.18779000', 1762214399999, '3076006652.00156760', 7074546, '12847.08574000', '1377869106.66817760', '0'], [1762214400000, '106583.05000000', '107299.00000000', '98944.36000000', '101497.22000000', '50534.87376000', 1762300799999, '5197697635.21241310', 9099609, '23388.99033000', '2406186713.17052980', '0'], [1762300800000, '101497.23000000', '104534.74000000', '98966.80000000', '103885.16000000', '33778.77571000', 1762387199999, '3454273922.70038500', 6500368, '18126.84828000', '1854232277.03301110', '0'], [1762387200000, '103885.16000000', '104200.00000000', '100300.95000000', '101346.04000000', '25814.62139000', 1762473599999, '2641767846.30582700', 5755001, '11972.54796000', '1225474173.02042840', '0'], [1762473600000, '101346.04000000', '104096.36000000', '99260.86000000', '103339.08000000', '32059.50942000', 1762559999999, '3251112979.30588400', 6335759, '16056.80582000', '1629564159.11657990', '0'], [1762560000000, '103339.09000000', '103406.22000000', '101454.00000000', '102312.94000000', '12390.77985000', 1762646399999, '1267165565.37527010', 2743819, '5862.65977000', '599611355.36714670', '0'], [1762646400000, '102312.95000000', '102337.89000000', '101620.23000000', '101851.18000000', '831.19448000', 1762732799999, '84733369.58441570', 224727, '301.73122000', '30754223.61701940', '0']]

        # Same as TradingView at the time this data was captured.
        self.assertEqual(self.chart.get_trend_metrics(period = 14), TrendMetrics(atr=np.float64(3744.131758689391), adx=np.float64(29.69130885404124), plus_di=np.float64(11.223719828924837), minus_di=np.float64(30.230447096339056)))
        self.assertEqual(self.chart.get_atr(period = 14), np.float64(3744.131758689391))
        self.assertEqual(self.chart.get_adx(period = 14), np.float64(29.69130885404124))

        self.chart._binance_api.get_candles.side_effect = None
        self.chart._binance_api.get_candles.return_value = [[1762239600000, '104766.14000000', '104997.64000000', '104317.56000000', '104490.72000000', '1633.60477000', 1762243199999, '170881497.11571010', 277938, '825.65011000', '86357032.20805210', '0'], [1762243200000, '104490.73000000', '104631.39000000', '103759.99000000', '104051.90000000', '1804.04853000', 1762246799999, '187949961.51984550', 323667, '736.00928000', '76696467.95009080', '0'], [1762246800000, '104051.90000000', '104138.65000000', '103636.00000000', '103857.96000000', '1455.72161000', 1762250399999, '151236916.91843210', 277311, '586.40434000', '60933243.36188970', '0'], [1762250400000, '103857.96000000', '104106.55000000', '103605.00000000', '103816.39000000', '1073.24239000', 1762253999999, '111391528.76030620', 287433, '453.16126000', '47036430.90085510', '0'], [1762254000000, '103816.39000000', '104699.07000000', '103774.33000000', '104584.76000000', '988.08793000', 1762257599999, '103067238.93782860', 245790, '580.55256000', '60561072.68142480', '0'], [1762257600000, '104584.75000000', '104638.29000000', '103844.39000000', '103952.54000000', '1216.95881000', 1762261199999, '126729264.09250430', 237611, '612.73444000', '63800851.97517530', '0'], [1762261200000, '103952.54000000', '104243.67000000', '103576.00000000', '103924.25000000', '1018.30395000', 1762264799999, '105783943.40432080', 255475, '387.55326000', '40272823.11600910', '0'], [1762264800000, '103924.26000000', '104694.28000000', '102915.05000000', '104500.01000000', '2915.82303000', 1762268399999, '302284273.32694020', 459051, '1298.77426000', '134722429.92614820', '0'], [1762268400000, '104500.01000000', '104842.63000000', '103185.89000000', '103197.01000000', '2271.81312000', 1762271999999, '236586744.20442310', 474489, '1070.68164000', '111547638.46053870', '0'], [1762272000000, '103197.02000000', '103500.05000000', '102164.00000000', '102257.70000000', '3313.32683000', 1762275599999, '340634523.35689600', 562206, '1289.48733000', '132596188.29272820', '0'], [1762275600000, '102257.70000000', '102257.70000000', '100800.00000000', '101114.83000000', '4223.40802000', 1762279199999, '428470955.46941760', 663485, '1817.30565000', '184336938.07732300', '0'], [1762279200000, '101114.82000000', '101492.74000000', '100010.73000000', '101363.98000000', '4101.41064000', 1762282799999, '413018514.74466230', 625911, '1807.90749000', '182126082.53774020', '0'], [1762282800000, '101363.97000000', '101711.84000000', '100414.00000000', '100542.64000000', '1814.79036000', 1762286399999, '183434047.28402390', 
            466508, '920.80932000', '93100254.75362400', '0'], [1762286400000, '100542.64000000', '101119.40000000', '99600.00000000', '100755.43000000', '4335.57159000', 1762289999999, '434923219.27642940', 599202, '2011.16256000', '201871975.23161480', '0'], [1762290000000, '100755.42000000', '100831.49000000', '98944.36000000', '100311.46000000', '4105.76650000', 1762293599999, '409707603.03082540', 530430, '1937.98055000', '193498397.99620770', '0'], [1762293600000, '100311.46000000', '101893.09000000', '100082.00000000', '101295.71000000', '2258.84809000', 1762297199999, '228253667.64408610', 383304, '1224.26678000', '123711717.59992360', '0'], [1762297200000, '101295.70000000', '101740.00000000', '100907.36000000', '101497.22000000', '1518.90709000', 1762300799999, '153914699.36998970', 233347, '943.06182000', '95577482.59034180', '0'], [1762300800000, '101497.23000000', '101752.96000000', '100350.00000000', '100564.30000000', '1452.38181000', 1762304399999, '146570803.54159430', 325593, '696.30472000', '70295605.15352610', '0'], [1762304400000, '100564.30000000', '101015.01000000', '98966.80000000', '100761.62000000', '3025.00486000', 1762307999999, '301950510.35940390', 522828, '1390.55257000', '138857475.75595550', '0'], [1762308000000, '100761.62000000', '101922.98000000', '100754.54000000', '101677.93000000', '3700.99085000', 1762311599999, '375285834.35778960', 471966, '2179.53607000', '221050816.74234640', '0'], [1762311600000, '101677.94000000', '102272.23000000', '101461.98000000', '102130.00000000', '2834.46709000', 1762315199999, '289059113.48833610', 353352, '1728.02857000', '176230486.41992610', '0'], [1762315200000, '102130.00000000', '102236.92000000', '101517.47000000', '101998.30000000', '2059.55564000', 1762318799999, '209940730.21261220', 261156, '1256.54626000', '128107387.26696730', '0'], [1762318800000, '101998.30000000', '102370.00000000', '101595.00000000', '101824.89000000', '1088.37371000', 1762322399999, '110963237.77415570', 226259, '615.84482000', '62797527.74170360', '0'], [1762322400000, '101824.89000000', '102139.36000000', '101500.00000000', '102119.99000000', '869.66608000', 1762325999999, '88544235.21881710', 196878, '537.06788000', '54684829.23326300', '0'], [1762326000000, '102120.00000000', '102152.58000000', '101601.71000000', '101993.02000000', '644.24535000', 1762329599999, '65649031.62615090', 167147, '336.71586000', '34311908.33222840', '0'], [1762329600000, '101993.03000000', '102000.02000000', '101176.47000000', '101699.74000000', '1179.77273000', 1762333199999, '119846849.02427830', 275371, '538.27264000', '54683918.67907820', '0'], [1762333200000, '101699.74000000', '102203.48000000', '101608.00000000', '101995.29000000', '785.11664000', 1762336799999, '80013947.64783450', 244906, '382.39385000', '38975610.94523450', '0'], [1762336800000, '101995.28000000', '101995.29000000', '101285.09000000', '101401.97000000', '724.99165000', 1762340399999, '73703110.33863780', 230243, '332.02398000', '33752316.87610950', '0'], [1762340400000, '101401.97000000', '102110.48000000', '101381.68000000', '102070.61000000', '887.62047000', 1762343999999, '90349664.26228100', 201205, '454.40746000', '46266350.62952320', '0'], [1762344000000, '102070.62000000', '102800.71000000', '101916.77000000', '102673.35000000', '1241.26951000', 1762347599999, '127120430.59674440', 253068, '722.42964000', '73990168.29950620', '0'], [1762347600000, '102673.34000000', '103253.39000000', '102291.82000000', '102985.91000000', '1451.58240000', 1762351199999, '149133124.36268100', 272356, '833.41291000', '85635488.60439400', '0'], [1762351200000, '102985.90000000', '103470.00000000', '102169.06000000', '103202.30000000', '1801.60223000', 1762354799999, '185347567.59692970', 394964, '922.45746000', '94920486.36561290', '0'], [1762354800000, '103202.30000000', '103798.37000000', '102829.51000000', '103728.30000000', '1851.46451000', 1762358399999, '191425685.22779390', 431127, '895.53407000', '92601996.86968000', '0'], [1762358400000, '103728.30000000', '104039.66000000', '103057.56000000', '103919.20000000', '1677.80348000', 1762361999999, '173897697.56666970', 330986, '868.95528000', '90077181.33284420', '0'], [1762362000000, '103919.20000000', '104000.00000000', '103388.46000000', '103904.05000000', '1795.89346000', 1762365599999, '186212145.72645740', 266922, '973.84041000', '100982118.48719390', '0'], [1762365600000, '103904.05000000', '104429.75000000', '103759.53000000', '104347.40000000', '1222.46217000', 1762369199999, '127253227.53865750', 248847, '718.27782000', '74767920.79003410', '0'], [1762369200000, '104347.41000000', '104529.41000000', '103986.96000000', '104008.09000000', '796.61274000', 1762372799999, '83048683.26227220', 177400, '409.07710000', '42650224.73223000', '0'], [1762372800000, '104008.09000000', '104534.74000000', '103620.00000000', '103831.22000000', '881.47869000', 1762376399999, '91663646.16364950', 209777, '449.03121000', '46699699.62087710', '0'], [1762376400000, '103831.22000000', '103831.22000000', '103500.80000000', '103672.37000000', '586.96502000', 1762379999999, '60844102.85884950', 176109, '274.78446000', '28487175.03012220', '0'], [1762380000000, '103672.38000000', '103798.95000000', '103305.05000000', '103706.55000000', '686.44411000', 1762383599999, '71077341.43399190', 130535, '318.67953000', '32998244.45868660', '0'], [1762383600000, '103706.55000000', '104100.00000000', '103667.26000000', '103885.16000000', '533.01051000', 1762387199999, '55373202.51379690', 131373, '292.67371000', '30407338.66596810', '0'], [1762387200000, '103885.16000000', '103897.86000000', '103324.21000000', '103677.72000000', '1223.43533000', 1762390799999, '126682517.57375300', 197552, '569.01089000', '58931629.63061780', '0'], [1762390800000, '103677.71000000', '103677.72000000', '102716.26000000', '103365.65000000', '1156.07343000', 1762394399999, 
            '119203566.19663220', 209569, '443.61298000', '45755330.02483310', '0'], [1762394400000, '103365.64000000', '103567.93000000', '102855.66000000', '103321.81000000', '711.05988000', 1762397999999, '73402219.52186860', 203928, '309.23405000', '31925222.02593220', '0'], [1762398000000, '103321.80000000', '103933.33000000', '103315.48000000', '103636.03000000', 
            '691.22573000', 1762401599999, '71641410.95429530', 169374, '428.13687000', '44367693.53722740', '0'], [1762401600000, '103636.92000000', '104200.00000000', '103580.00000000', '104030.79000000', '671.34024000', 1762405199999, '69737412.93120900', 121899, '386.06688000', '40102650.57059450', '0'], [1762405200000, '104030.80000000', '104030.80000000', '103088.00000000', '103143.57000000', '755.30818000', 1762408799999, '78190952.35513860', 172800, '289.19095000', '29916912.61180200', '0'], [1762408800000, '103143.57000000', '103591.47000000', '103006.17000000', '103318.75000000', '555.63033000', 1762412399999, '57417716.67537140', 168897, '294.13001000', '30393683.13160890', '0'], [1762412400000, '103318.76000000', '103561.94000000', '102910.66000000', '103185.48000000', '988.58677000', 1762415999999, '102016190.85638880', 228244, '470.80231000', '48589641.70851420', '0'], [1762416000000, '103184.75000000', '103440.00000000', '102971.99000000', '103200.26000000', '647.13062000', 1762419599999, '66784900.93099830', 169514, '310.65808000', '32063906.70109750', '0'], [1762419600000, '103200.26000000', '103261.93000000', '102810.00000000', '102810.01000000', '536.64925000', 1762423199999, '55271407.17138010', 168660, '252.39466000', '25994164.68959070', '0'], [1762423200000, '102810.01000000', '103288.59000000', '102651.63000000', '103122.54000000', '932.94397000', 1762426799999, '96025789.72081780', 146842, '381.88738000', '39324033.75366910', '0'], [1762426800000, '103122.54000000', '103300.01000000', '102743.82000000', '103227.58000000', '540.52931000', 1762430399999, '55715007.95831110', 116103, '273.33391000', '28175966.26725600', '0'], [1762430400000, 
            '103227.59000000', '103333.18000000', '102383.64000000', '102552.38000000', '1051.14565000', 1762433999999, '108029118.91729590', 191008, '506.74309000', '52069667.88418600', '0'], [1762434000000, '102552.39000000', '103626.46000000', '102552.38000000', '103319.71000000', '941.18298000', 1762437599999, '97133099.68168520', 245056, '474.64674000', '48976505.02036210', '0'], [1762437600000, '103319.71000000', '103579.68000000', '102044.63000000', '102125.00000000', '1661.00797000', 1762441199999, '170484641.36058270', 409701, '762.91799000', '78313706.27666970', '0'], [1762441200000, '102124.99000000', '102932.94000000', '101630.00000000', '102014.48000000', '3027.20967000', 1762444799999, '309275798.94860380', 578086, '1333.43765000', '136211327.11928060', '0'], [1762444800000, '102014.49000000', '102393.51000000', '100300.95000000', '100867.20000000', '3035.72721000', 1762448399999, '307264303.98915810', 502070, '1363.65935000', '138009506.81565600', '0'], [1762448400000, '100867.19000000', '101946.31000000', '100770.57000000', '101804.01000000', '1310.77048000', 
            1762451999999, '132832015.63575380', 423293, '662.44406000', '67142638.22894070', '0'], [1762452000000, '101804.02000000', '102338.00000000', '100916.74000000', '101722.13000000', '956.16247000', 1762455599999, '97128883.02653900', 305594, 
            '478.94707000', '48654299.09741960', '0'], [1762455600000, '101722.12000000', '101999.44000000', '101202.73000000', '101388.81000000', '756.60374000', 1762459199999, '76887820.02559040', 255989, '367.82673000', '37387471.61291160', '0'], [1762459200000, '101388.82000000', '101643.28000000', '100638.55000000', '100914.11000000', '812.36283000', 1762462799999, '82127009.86715830', 272242, '370.48924000', '37455181.35431730', '0'], [1762462800000, '100914.11000000', '101220.90000000', '100541.17000000', '101117.17000000', '938.29195000', 1762466399999, '94674510.93831910', 198808, '437.93414000', '44190719.51078570', '0'], [1762466400000, '101117.17000000', '101480.00000000', '101009.70000000', '101415.05000000', 
            '639.89634000', 1762469999999, '64780913.62381160', 137810, '335.63089000', '33977254.83355100', '0'], [1762470000000, '101415.05000000', '101538.00000000', '101132.60000000', '101346.04000000', '1274.34706000', 1762473599999, '129060637.44516490', 161962, '469.41204000', '47545060.61360470', '0'], [1762473600000, '101346.04000000', '101640.00000000', '100749.94000000', '101479.78000000', '823.54705000', 1762477199999, '83402389.68238740', 265377, '403.93762000', '40917127.64705690', '0'], [1762477200000, '101479.79000000', '101894.83000000', '100905.10000000', '101538.96000000', '1095.04627000', 1762480799999, '110984810.45815980', 285086, '582.41591000', '59030892.19108520', '0'], [1762480800000, '101538.96000000', '101928.99000000', '101242.79000000', '101905.11000000', '779.48744000', 1762484399999, '79172360.30952400', 192983, '426.18870000', '43298799.94390360', '0'], [1762484400000, '101905.12000000', '102500.00000000', '101876.03000000', 
            '101916.29000000', '1267.53296000', 1762487999999, '129528549.94771780', 200037, '716.33328000', '73202925.99749890', '0'], [1762488000000, '101916.30000000', '102100.25000000', '101582.92000000', '102027.19000000', '798.08441000', 1762491599999, '81283959.07417850', 134097, '429.77761000', '43791115.37055380', '0'], [1762491600000, '102027.20000000', '102527.00000000', '102024.75000000', '102447.47000000', '701.21696000', 1762495199999, '71768706.41709210', 148391, '376.66428000', '38546127.70674940', '0'], [1762495200000, '102447.48000000', '102496.00000000', '101819.10000000', '101819.10000000', '469.88373000', 1762498799999, '48006594.62379220', 100898, '164.75868000', '16838107.75293440', '0'], [1762498800000, '101819.11000000', '102010.00000000', '101638.43000000', '102010.00000000', '1093.42589000', 1762502399999, '111412024.67941620', 126376, '603.31633000', '61478191.01621720', '0'], [1762502400000, '102009.99000000', '102050.00000000', 
            '101438.39000000', '101496.18000000', '817.45963000', 1762505999999, '83185977.42538760', 139705, '406.68259000', '41383090.55451700', '0'], [1762506000000, '101496.18000000', '101512.51000000', '100775.65000000', '101013.66000000', '1382.92001000', 1762509599999, '139844929.81392250', 208421, '678.67279000', '68633699.98171700', '0'], [1762509600000, '101013.67000000', '101250.03000000', '100564.43000000', '100770.85000000', '1279.53134000', 1762513199999, '128970986.25818860', 184343, '499.31590000', '50335833.20219800', '0'], [1762513200000, '100770.85000000', '100796.86000000', '99803.58000000', '100411.89000000', '3120.50016000', 1762516799999, '312664400.67140860', 386174, '1294.42273000', '129641767.61866590', '0'], [1762516800000, '100411.89000000', '100625.00000000', '99260.86000000', '99638.28000000', '1799.68202000', 
            1762520399999, '179690072.82481380', 350114, '764.81179000', '76375121.64023070', '0'], [1762520400000, '99638.29000000', '100579.72000000', '99455.10000000', '100347.35000000', '1635.46609000', 1762523999999, '163774307.96598570', 353380, 
            '899.19792000', '90055367.09835950', '0'], [1762524000000, '100347.35000000', '100922.78000000', '99519.32000000', '100806.08000000', '2597.13075000', 1762527599999, '260550417.39014200', 505647, '1222.09911000', '122622509.32902250', '0'], [1762527600000, '100806.70000000', '101253.99000000', '100353.45000000', '100797.95000000', '2600.73788000', 1762531199999, '262249379.73434360', 527910, '1262.48740000', '127306940.67644210', '0'], [1762531200000, '100797.95000000', '101628.43000000', '100517.06000000', '101169.20000000', '1975.20246000', 1762534799999, '199788762.94751510', 411079, '999.32635000', '101095304.17988280', '0'], [1762534800000, '101169.19000000', '102736.84000000', '100942.73000000', '102397.12000000', '2091.96075000', 1762538399999, '213497879.72927480', 422158, '1222.84723000', '124799912.98915790', '0'], [1762538400000, '102397.13000000', '102859.99000000', '102282.20000000', '102609.46000000', '1585.11088000', 1762541999999, '162617827.52423450', 385142, '909.37754000', '93296887.19450760', '0'], [1762542000000, '102609.46000000', '103395.25000000', '102481.75000000', '103395.25000000', '1184.29403000', 1762545599999, '121964007.37115810', 284347, '682.05318000', '70251486.80846820', '0'], [1762545600000, '103395.92000000', '103900.00000000', '102958.00000000', '103783.09000000', '970.62813000', 1762549199999, '100440870.66301160', 300374, '546.73990000', '56591932.30469590', '0'], [1762549200000, '103783.08000000', '103879.23000000', '103311.33000000', '103879.23000000', '743.31566000', 1762552799999, '76931862.06413570', 157056, '393.93069000', '40778086.99255260', '0'], [1762552800000, '103879.22000000', '104096.36000000', '103595.38000000', '103633.03000000', '736.65333000', 1762556399999, '76512635.04616610', 138300, '354.69445000', '36853507.56826350', '0'], [1762556400000, '103633.04000000', '103759.36000000', '103329.79000000', '103339.08000000', '510.69159000', 1762559999999, '52869266.68392770', 128364, '216.75384000', '22439423.35189930', '0'], [1762560000000, '103339.09000000', '103406.22000000', '102539.49000000', '102713.15000000', '877.26495000', 1762563599999, '90373017.55796000', 204367, '370.61768000', '38172784.40358140', '0'], [1762563600000, '102713.15000000', '103240.32000000', '102662.25000000', 
            '102996.84000000', '498.24095000', 1762567199999, '51318525.41978020', 151285, '266.16392000', '27416331.43080920', '0'], [1762567200000, '102996.85000000', '103333.33000000', '102766.31000000', '102846.65000000', '494.72835000', 1762570799999, '51000514.17586280', 139744, '240.25685000', '24772583.91970390', '0'], [1762570800000, '102846.66000000', '103293.21000000', '102592.75000000', '102592.76000000', '531.57226000', 1762574399999, '54701753.95670340', 134176, '236.67566000', '24359660.24507190', '0'], [1762574400000, '102592.76000000', '102836.00000000', '102409.52000000', '102565.03000000', '602.92361000', 1762577999999, '61875484.77768800', 146103, '282.12219000', '28957305.78198390', '0'], [1762578000000, '102565.03000000', '102733.83000000', '102272.66000000', '102304.00000000', '396.06427000', 1762581599999, '40595664.73097090', 112641, '175.47082000', '17986655.20162580', '0'], [1762581600000, '102304.01000000', '102519.03000000', '102092.26000000', '102215.62000000', '590.77493000', 1762585199999, '60432455.89917180', 133123, '257.61903000', '26355451.19494380', '0'], [1762585200000, '102215.63000000', '102399.88000000', '101902.64000000', '102352.96000000', '452.19970000', 1762588799999, '46192573.53941690', 84560, '211.55086000', '21614678.50461780', '0'], [1762588800000, '102352.96000000', '102687.72000000', '102156.36000000', '102431.74000000', '470.18368000', 1762592399999, '48177544.12934000', 73989, '289.09191000', '29623099.65489780', '0'], [1762592400000, '102431.74000000', '102615.53000000', '102225.52000000', '102399.46000000', '359.62626000', 1762595999999, '36831975.84473800', 73280, '191.11262000', '19576084.63691700', '0'], [1762596000000, '102399.45000000', '102575.35000000', '102310.00000000', '102480.04000000', '301.03917000', 1762599599999, '30846532.12191840', 56842, '154.67875000', '15850407.29257160', '0'], [1762599600000, '102480.04000000', '102630.14000000', '101715.76000000', '101857.10000000', '707.36146000', 1762603199999, '72238672.14827160', 108097, '311.36673000', '31820783.82870010', '0'], [1762603200000, '101857.10000000', '102108.00000000', '101731.19000000', '102065.14000000', 
            '439.24627000', 1762606799999, '44783531.93717810', 112243, '253.30837000', '25827544.31441240', '0'], [1762606800000, '102065.14000000', '102186.99000000', '101720.67000000', '101804.63000000', '952.83284000', 1762610399999, '97160478.98592720', 165922, '388.22595000', '39588605.14935170', '0'], [1762610400000, '101804.62000000', '102083.67000000', '101454.00000000', '101827.19000000', '1159.38189000', 1762613999999, '117940827.76229630', 182143, '554.12424000', '56367938.52794310', '0'], [1762614000000, '101827.19000000', '101954.00000000', '101500.00000000', '101711.45000000', '511.67056000', 1762617599999, '52035960.58358720', 139278, '227.04828000', '23090370.85282360', '0'], [1762617600000, '101711.46000000', '101963.66000000', '101525.98000000', '101850.22000000', '502.57143000', 1762621199999, '51159130.68425430', 148968, '226.90759000', '23096362.89568580', '0'], [1762621200000, '101850.23000000', '102003.57000000', '101549.85000000', '101994.52000000', '479.97599000', 1762624799999, '48867669.35129350', 116501, '257.36081000', '26205731.21547840', '0'], 
            [1762624800000, '101994.53000000', '102219.39000000', '101824.86000000', '102139.53000000', '766.44634000', 1762628399999, '78187462.39734860', 101144, '395.11988000', '40308399.32402030', '0'], [1762628400000, '102139.52000000', '102186.87000000', '101522.08000000', '101989.65000000', '371.41335000', 1762631999999, '37839284.35658650', 99404, '140.83144000', '14343707.63637590', '0'], [1762632000000, '101989.65000000', '102172.35000000', '101957.94000000', '102068.06000000', '206.62460000', 1762635599999, '21091484.24514780', 60571, '90.13500000', '9201117.76807230', '0'], [1762635600000, '102068.06000000', '102367.72000000', '102028.62000000', '102272.81000000', '234.42240000', 1762639199999, '23961429.86303480', 70041, '106.19741000', '10855204.15198920', '0'], [1762639200000, '102272.82000000', '102426.12000000', '102171.73000000', '102377.46000000', '249.46029000', 1762642799999, '25519827.66659450', 60433, '123.37929000', '12621690.73845100', '0'], [1762642800000, '102377.46000000', '102482.20000000', '102276.82000000', '102312.94000000', '234.75430000', 1762646399999, '24033763.24019930', 68964, '113.29449000', '11598856.69711880', '0'], [1762646400000, '102312.95000000', '102337.89000000', '101620.23000000', '101797.74000000', '616.42627000', 1762649999999, '62853345.05601690', 146502, '210.10202000', '21418526.89125750', '0'], [1762650000000, '101797.74000000', '102004.58000000', '101686.72000000', '101752.19000000', '243.74572000', 1762653599999, '24828246.68708840', 93442, '100.80560000', '10269272.89607900', '0']]

        # Same as TradingView at the time this data was captured.
        self.assertEqual(self.chart.get_trend_metrics(period = 14), TrendMetrics(atr=np.float64(502.5806052540767), adx=np.float64(19.160229786816753), plus_di=np.float64(13.472554484435445), minus_di=np.float64(24.670655263090325)))
        self.assertEqual(self.chart.get_atr(period = 14), np.float64(502.5806052540767))
        self.assertEqual(self.chart.get_adx(period = 14), np.float64(19.160229786816753))
